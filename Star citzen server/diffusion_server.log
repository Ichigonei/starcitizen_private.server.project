2025-08-05 00:30:54,167 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 00:30:54,167 - INFO - [__main__] ================================================================================
2025-08-05 00:30:54,167 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 00:30:54,167 - INFO - [__main__] ================================================================================
2025-08-05 00:30:54,167 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 00:30:54,167 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 00:30:54,167 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 00:30:54,167 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 00:30:54,167 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 00:30:54,168 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 00:30:54,168 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 00:30:54,168 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 00:30:54,168 - INFO - [__main__] 
2025-08-05 00:30:54,168 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 00:30:54,168 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 00:30:54,168 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 00:30:54,168 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 00:30:54,168 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 00:30:54,168 - INFO - [__main__] ================================================================================
2025-08-05 00:30:54,168 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 00:30:54,169 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 00:31:30,907 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 00:31:30,908 - INFO - [__main__] ================================================================================
2025-08-05 00:31:30,908 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 00:31:30,908 - INFO - [__main__] ================================================================================
2025-08-05 00:31:30,908 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 00:31:30,908 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 00:31:30,908 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 00:31:30,908 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 00:31:30,908 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 00:31:30,909 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 00:31:30,909 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 00:31:30,909 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 00:31:30,909 - INFO - [__main__] 
2025-08-05 00:31:30,909 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 00:31:30,909 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 00:31:30,909 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 00:31:30,909 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 00:31:30,909 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 00:31:30,909 - INFO - [__main__] ================================================================================
2025-08-05 00:31:30,909 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 00:31:30,910 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 00:31:38,904 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 00:31:38,904 - INFO - [__main__] ================================================================================
2025-08-05 00:31:38,904 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 00:31:38,905 - INFO - [__main__] ================================================================================
2025-08-05 00:31:38,905 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 00:31:38,905 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 00:31:38,905 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 00:31:38,905 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 00:31:38,905 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 00:31:38,905 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 00:31:38,905 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 00:31:38,905 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 00:31:38,905 - INFO - [__main__] 
2025-08-05 00:31:38,905 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 00:31:38,905 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 00:31:38,905 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 00:31:38,906 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 00:31:38,906 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 00:31:38,906 - INFO - [__main__] ================================================================================
2025-08-05 00:31:38,906 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 00:31:38,906 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 00:32:28,355 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:56979 (session: d630618d-db2a-4d50-8fe3-556588dfb533)
2025-08-05 00:32:28,371 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 00:32:28,371 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 00:32:28,371 - INFO - [__main__] 🔍 Service discovery request from session d630618d-db2a-4d50-8fe3-556588dfb533
2025-08-05 00:32:28,371 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754343148371

2025-08-05 00:32:28,372 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 00:32:28,473 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 00:32:28,473 - INFO - [__main__] 🎮 Lobby destinations request from session d630618d-db2a-4d50-8fe3-556588dfb533
2025-08-05 00:32:28,473 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754343148473

2025-08-05 00:32:28,473 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 00:32:28,618 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 00:32:28,618 - INFO - [__main__] 🌍 Region setup request from session d630618d-db2a-4d50-8fe3-556588dfb533
2025-08-05 00:32:28,619 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 00:32:28,619 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 00:32:38,375 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 00:32:38,375 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 00:32:38,375 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754343158375
session_token: "sc_session_1754343148_d630618d"
keep_alive: true
heartbeat_interval: 30

2025-08-05 00:32:38,375 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 00:32:38,878 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session d630618d-db2a-4d50-8fe3-556588dfb533
2025-08-05 00:32:38,878 - INFO - [__main__] 📤 Sending minimal auth sequence...
2025-08-05 00:32:38,878 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 00:32:39,379 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 00:32:39,379 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 56979) disconnected (session: d630618d-db2a-4d50-8fe3-556588dfb533)
2025-08-05 00:32:39,379 - INFO - [__main__] 📊 Session stats: 11.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 00:32:39,379 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session d630618d-db2a-4d50-8fe3-556588dfb533
2025-08-05 00:32:39,379 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 00:32:58,465 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:56990 (session: 51bd50f1-4290-455b-856c-e42e31d4e82d)
2025-08-05 00:32:58,482 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 00:32:58,482 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 00:32:58,482 - INFO - [__main__] 🔍 Service discovery request from session 51bd50f1-4290-455b-856c-e42e31d4e82d
2025-08-05 00:32:58,483 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754343178483

2025-08-05 00:32:58,483 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 00:33:08,366 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 00:33:08,366 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 00:33:08,366 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754343188366
session_token: "sc_session_1754343178_51bd50f1"
keep_alive: true
heartbeat_interval: 30

2025-08-05 00:33:08,366 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 00:33:08,476 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 00:33:08,476 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 00:33:08,477 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754343188476
session_token: "sc_session_1754343178_51bd50f1"
keep_alive: true
heartbeat_interval: 30

2025-08-05 00:33:08,477 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 00:33:08,868 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 51bd50f1-4290-455b-856c-e42e31d4e82d
2025-08-05 00:33:08,868 - INFO - [__main__] 📤 Sending minimal auth sequence...
2025-08-05 00:33:08,869 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 00:33:09,370 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 00:33:09,371 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 56990) disconnected (session: 51bd50f1-4290-455b-856c-e42e31d4e82d)
2025-08-05 00:33:09,371 - INFO - [__main__] 📊 Session stats: 10.9s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 00:33:09,371 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 51bd50f1-4290-455b-856c-e42e31d4e82d
2025-08-05 00:33:09,371 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 00:49:27,235 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 00:49:27,236 - INFO - [__main__] ================================================================================
2025-08-05 00:49:27,236 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 00:49:27,236 - INFO - [__main__] ================================================================================
2025-08-05 00:49:27,236 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 00:49:27,236 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 00:49:27,236 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 00:49:27,237 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 00:49:27,237 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 00:49:27,237 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 00:49:27,237 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 00:49:27,237 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 00:49:27,237 - INFO - [__main__] 
2025-08-05 00:49:27,237 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 00:49:27,237 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 00:49:27,237 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 00:49:27,237 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 00:49:27,237 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 00:49:27,237 - INFO - [__main__] ================================================================================
2025-08-05 00:49:27,238 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 00:49:27,238 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 00:54:04,001 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57378 (session: fcc8a882-8730-4dc5-9f62-c9129127542e)
2025-08-05 00:54:04,018 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 00:54:04,018 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 00:54:04,018 - INFO - [__main__] 🔍 Service discovery request from session fcc8a882-8730-4dc5-9f62-c9129127542e
2025-08-05 00:54:04,018 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754344444018

2025-08-05 00:54:04,018 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 00:54:04,129 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 00:54:04,129 - INFO - [__main__] 🎮 Lobby destinations request from session fcc8a882-8730-4dc5-9f62-c9129127542e
2025-08-05 00:54:04,129 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754344444129

2025-08-05 00:54:04,129 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 00:54:04,261 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 00:54:04,261 - INFO - [__main__] 🌍 Region setup request from session fcc8a882-8730-4dc5-9f62-c9129127542e
2025-08-05 00:54:04,261 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 00:54:04,262 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 00:54:34,568 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 00:54:34,569 - INFO - [__main__] ================================================================================
2025-08-05 00:54:34,569 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 00:54:34,569 - INFO - [__main__] ================================================================================
2025-08-05 00:54:34,569 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 00:54:34,569 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 00:54:34,569 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 00:54:34,569 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 00:54:34,569 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 00:54:34,570 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 00:54:34,570 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 00:54:34,570 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 00:54:34,570 - INFO - [__main__] 
2025-08-05 00:54:34,570 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 00:54:34,570 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 00:54:34,570 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 00:54:34,570 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 00:54:34,570 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 00:54:34,570 - INFO - [__main__] ================================================================================
2025-08-05 00:54:34,570 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 00:54:34,571 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 00:54:57,690 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57419 (session: 4a9b50be-986a-4f89-8453-40fb18416844)
2025-08-05 00:54:57,712 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 00:54:57,712 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 00:54:57,712 - INFO - [__main__] 🔍 Service discovery request from session 4a9b50be-986a-4f89-8453-40fb18416844
2025-08-05 00:54:57,712 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754344497712

2025-08-05 00:54:57,712 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 00:54:57,813 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 00:54:57,813 - INFO - [__main__] 🎮 Lobby destinations request from session 4a9b50be-986a-4f89-8453-40fb18416844
2025-08-05 00:54:57,813 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754344497813

2025-08-05 00:54:57,813 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 00:54:58,001 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 00:54:58,001 - INFO - [__main__] 🌍 Region setup request from session 4a9b50be-986a-4f89-8453-40fb18416844
2025-08-05 00:54:58,002 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 00:54:58,002 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 00:55:07,709 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 00:55:07,709 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 00:55:07,710 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754344507710
session_token: "sc_session_1754344497_4a9b50be"
keep_alive: true
heartbeat_interval: 30

2025-08-05 00:55:07,710 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 00:55:08,215 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 4a9b50be-986a-4f89-8453-40fb18416844
2025-08-05 00:55:08,215 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 00:55:08,215 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 00:55:08,417 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 00:55:08,618 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 00:55:08,820 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 00:55:09,334 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 00:55:09,334 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57419) disconnected (session: 4a9b50be-986a-4f89-8453-40fb18416844)
2025-08-05 00:55:09,334 - INFO - [__main__] 📊 Session stats: 11.6s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 00:55:09,335 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 4a9b50be-986a-4f89-8453-40fb18416844
2025-08-05 00:55:09,335 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 00:55:27,810 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57429 (session: d4b46195-9be4-4f68-aa26-b307ac94d986)
2025-08-05 00:55:27,831 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 00:55:27,831 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 00:55:27,831 - INFO - [__main__] 🔍 Service discovery request from session d4b46195-9be4-4f68-aa26-b307ac94d986
2025-08-05 00:55:27,832 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754344527832

2025-08-05 00:55:27,832 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 00:55:57,946 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57429) disconnected (session: d4b46195-9be4-4f68-aa26-b307ac94d986)
2025-08-05 00:55:57,946 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 01:04:02,047 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:04:02,047 - INFO - [__main__] ================================================================================
2025-08-05 01:04:02,047 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:04:02,047 - INFO - [__main__] ================================================================================
2025-08-05 01:04:02,047 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:04:02,047 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:04:02,047 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:04:02,047 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:04:02,048 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:04:02,048 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:04:02,048 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:04:02,048 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:04:02,048 - INFO - [__main__] 
2025-08-05 01:04:02,048 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:04:02,048 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:04:02,048 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:04:02,048 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:04:02,048 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:04:02,048 - INFO - [__main__] ================================================================================
2025-08-05 01:04:02,048 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:04:02,049 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:04:27,464 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57552 (session: 00c2b079-c880-476e-a856-0f0586fa460d)
2025-08-05 01:04:27,486 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:04:27,487 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:04:27,487 - INFO - [__main__] 🔍 Service discovery request from session 00c2b079-c880-476e-a856-0f0586fa460d
2025-08-05 01:04:27,487 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345067487

2025-08-05 01:04:27,487 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:04:27,589 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:04:27,589 - INFO - [__main__] 🎮 Lobby destinations request from session 00c2b079-c880-476e-a856-0f0586fa460d
2025-08-05 01:04:27,589 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754345067589

2025-08-05 01:04:27,589 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:04:27,770 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:04:27,770 - INFO - [__main__] 🌍 Region setup request from session 00c2b079-c880-476e-a856-0f0586fa460d
2025-08-05 01:04:27,770 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:04:27,770 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:04:37,485 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:04:37,485 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:04:37,485 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345077485
session_token: "sc_session_1754345067_00c2b079"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:04:37,485 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:04:37,994 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 00c2b079-c880-476e-a856-0f0586fa460d
2025-08-05 01:04:37,994 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:04:37,995 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 01:04:38,210 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 01:04:38,411 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 01:04:38,613 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 01:04:39,125 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:04:39,125 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57552) disconnected (session: 00c2b079-c880-476e-a856-0f0586fa460d)
2025-08-05 01:04:39,125 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:04:39,125 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 00c2b079-c880-476e-a856-0f0586fa460d
2025-08-05 01:04:39,126 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:04:57,589 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57572 (session: 7f68cae0-e3f7-4526-b4ae-20d75d3b1845)
2025-08-05 01:04:57,606 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:04:57,606 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:04:57,606 - INFO - [__main__] 🔍 Service discovery request from session 7f68cae0-e3f7-4526-b4ae-20d75d3b1845
2025-08-05 01:04:57,606 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345097606

2025-08-05 01:04:57,606 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:05:27,711 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57572) disconnected (session: 7f68cae0-e3f7-4526-b4ae-20d75d3b1845)
2025-08-05 01:05:27,711 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 01:06:35,983 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:06:35,983 - INFO - [__main__] ================================================================================
2025-08-05 01:06:35,983 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:06:35,983 - INFO - [__main__] ================================================================================
2025-08-05 01:06:35,983 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:06:35,983 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:06:35,983 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:06:35,984 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:06:35,984 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:06:35,984 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:06:35,984 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:06:35,984 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:06:35,984 - INFO - [__main__] 
2025-08-05 01:06:35,984 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:06:35,984 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:06:35,984 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:06:35,984 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:06:35,985 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:06:35,985 - INFO - [__main__] ================================================================================
2025-08-05 01:06:35,985 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:06:35,985 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:06:57,239 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57607 (session: adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa)
2025-08-05 01:06:57,255 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:06:57,255 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:06:57,255 - INFO - [__main__] 🔍 Service discovery request from session adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa
2025-08-05 01:06:57,255 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345217255

2025-08-05 01:06:57,255 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:06:57,356 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:06:57,356 - INFO - [__main__] 🎮 Lobby destinations request from session adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa
2025-08-05 01:06:57,356 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754345217356

2025-08-05 01:06:57,356 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:06:57,526 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:06:57,526 - INFO - [__main__] 🌍 Region setup request from session adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa
2025-08-05 01:06:57,526 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:06:57,526 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:07:07,249 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:07:07,249 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:07:07,249 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345227249
session_token: "sc_session_1754345217_adfabe6b"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:07:07,250 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:07:07,751 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa
2025-08-05 01:07:07,751 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:07:07,751 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 01:07:07,953 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 01:07:08,155 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 01:07:08,359 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 01:07:08,871 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:07:08,871 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57607) disconnected (session: adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa)
2025-08-05 01:07:08,871 - INFO - [__main__] 📊 Session stats: 11.6s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:07:08,871 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session adfabe6b-6cb6-4847-bb80-0b89b0bf6bfa
2025-08-05 01:07:08,871 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:07:27,347 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57616 (session: 6e3b170e-f4f1-4b13-9ef1-63d93157b7ea)
2025-08-05 01:07:27,370 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:07:27,370 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:07:27,370 - INFO - [__main__] 🔍 Service discovery request from session 6e3b170e-f4f1-4b13-9ef1-63d93157b7ea
2025-08-05 01:07:27,370 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345247370

2025-08-05 01:07:27,370 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:07:37,252 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:07:37,253 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:07:37,253 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345257253
session_token: "sc_session_1754345247_6e3b170e"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:07:37,253 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:07:37,366 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:07:37,366 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:07:37,366 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345257366
session_token: "sc_session_1754345247_6e3b170e"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:07:37,367 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:07:37,754 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 6e3b170e-f4f1-4b13-9ef1-63d93157b7ea
2025-08-05 01:07:37,755 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:07:37,755 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 01:07:37,956 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 01:07:38,172 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 01:07:38,374 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 01:07:38,885 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:07:38,885 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57616) disconnected (session: 6e3b170e-f4f1-4b13-9ef1-63d93157b7ea)
2025-08-05 01:07:38,885 - INFO - [__main__] 📊 Session stats: 11.5s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 01:07:38,886 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 6e3b170e-f4f1-4b13-9ef1-63d93157b7ea
2025-08-05 01:07:38,886 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:07:47,470 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57626 (session: 1e1515f9-374d-43e4-8745-7c39bedca797)
2025-08-05 01:07:47,487 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:07:47,487 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:07:47,487 - INFO - [__main__] 🔍 Service discovery request from session 1e1515f9-374d-43e4-8745-7c39bedca797
2025-08-05 01:07:47,487 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345267487

2025-08-05 01:07:47,487 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:08:17,611 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57626) disconnected (session: 1e1515f9-374d-43e4-8745-7c39bedca797)
2025-08-05 01:08:17,612 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 01:10:31,523 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:10:31,523 - INFO - [__main__] ================================================================================
2025-08-05 01:10:31,523 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:10:31,523 - INFO - [__main__] ================================================================================
2025-08-05 01:10:31,523 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:10:31,523 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:10:31,523 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:10:31,524 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:10:31,524 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:10:31,524 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:10:31,524 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:10:31,524 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:10:31,524 - INFO - [__main__] 
2025-08-05 01:10:31,524 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:10:31,524 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:10:31,524 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:10:31,525 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:10:31,525 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:10:31,525 - INFO - [__main__] ================================================================================
2025-08-05 01:10:31,525 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:10:31,525 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:11:04,002 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57700 (session: e2a95874-e786-4103-89db-7bc1ecfc06ee)
2025-08-05 01:11:04,024 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:11:04,024 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:11:04,024 - INFO - [__main__] 🔍 Service discovery request from session e2a95874-e786-4103-89db-7bc1ecfc06ee
2025-08-05 01:11:04,024 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345464024

2025-08-05 01:11:04,024 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:11:04,135 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:11:04,135 - INFO - [__main__] 🎮 Lobby destinations request from session e2a95874-e786-4103-89db-7bc1ecfc06ee
2025-08-05 01:11:04,135 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754345464135

2025-08-05 01:11:04,136 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:11:04,285 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:11:04,285 - INFO - [__main__] 🌍 Region setup request from session e2a95874-e786-4103-89db-7bc1ecfc06ee
2025-08-05 01:11:04,285 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:11:04,285 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:11:14,023 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:11:14,023 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:11:14,023 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345474023
session_token: "sc_session_1754345464_e2a95874"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:11:14,023 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:11:14,532 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session e2a95874-e786-4103-89db-7bc1ecfc06ee
2025-08-05 01:11:14,532 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:11:14,641 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:11:14,641 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 01:11:14,844 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 01:11:15,047 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 01:11:15,249 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 01:11:15,765 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:11:15,766 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57700) disconnected (session: e2a95874-e786-4103-89db-7bc1ecfc06ee)
2025-08-05 01:11:15,766 - INFO - [__main__] 📊 Session stats: 11.8s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:11:15,766 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session e2a95874-e786-4103-89db-7bc1ecfc06ee
2025-08-05 01:11:15,766 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:11:34,121 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57705 (session: 1c34b987-865d-4372-8eaf-63d05fb984ea)
2025-08-05 01:11:34,143 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:11:34,143 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:11:34,144 - INFO - [__main__] 🔍 Service discovery request from session 1c34b987-865d-4372-8eaf-63d05fb984ea
2025-08-05 01:11:34,144 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754345494144

2025-08-05 01:11:34,144 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:11:44,018 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:11:44,018 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:11:44,018 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345504018
session_token: "sc_session_1754345494_1c34b987"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:11:44,018 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:11:44,141 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:11:44,141 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:11:44,141 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754345504141
session_token: "sc_session_1754345494_1c34b987"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:11:44,141 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:11:44,529 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 1c34b987-865d-4372-8eaf-63d05fb984ea
2025-08-05 01:11:44,530 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:11:44,637 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:11:44,638 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage
2025-08-05 01:11:44,839 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage
2025-08-05 01:11:45,041 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage
2025-08-05 01:11:45,256 - INFO - [__main__] 📤 Sent LoginCompletedMessage with game server redirect
2025-08-05 01:11:45,758 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:11:45,759 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57705) disconnected (session: 1c34b987-865d-4372-8eaf-63d05fb984ea)
2025-08-05 01:11:45,759 - INFO - [__main__] 📊 Session stats: 11.6s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 01:11:45,759 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 1c34b987-865d-4372-8eaf-63d05fb984ea
2025-08-05 01:11:45,759 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:31:10,591 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:31:10,592 - INFO - [__main__] ================================================================================
2025-08-05 01:31:10,592 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:31:10,592 - INFO - [__main__] ================================================================================
2025-08-05 01:31:10,592 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:31:10,592 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:31:10,592 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:31:10,592 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:31:10,593 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:31:10,593 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:31:10,593 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:31:10,593 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:31:10,593 - INFO - [__main__] 
2025-08-05 01:31:10,593 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:31:10,593 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:31:10,593 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:31:10,593 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:31:10,593 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:31:10,593 - INFO - [__main__] ================================================================================
2025-08-05 01:31:10,593 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:31:10,594 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:31:33,675 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:57955 (session: dcaac6ea-3c9e-4fe8-a9b6-9e969178297e)
2025-08-05 01:31:33,692 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:31:33,692 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:31:33,692 - INFO - [__main__] 🔍 Service discovery request from session dcaac6ea-3c9e-4fe8-a9b6-9e969178297e
2025-08-05 01:31:33,692 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754346693692

2025-08-05 01:31:33,692 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:31:33,807 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:31:33,807 - INFO - [__main__] 🎮 Lobby destinations request from session dcaac6ea-3c9e-4fe8-a9b6-9e969178297e
2025-08-05 01:31:33,808 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754346693808

2025-08-05 01:31:33,808 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:31:33,966 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:31:33,966 - INFO - [__main__] 🌍 Region setup request from session dcaac6ea-3c9e-4fe8-a9b6-9e969178297e
2025-08-05 01:31:33,966 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:31:33,966 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:31:43,689 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:31:43,690 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:31:43,690 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346703690
session_token: "sc_session_1754346693_dcaac6ea"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:31:43,690 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:31:44,201 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session dcaac6ea-3c9e-4fe8-a9b6-9e969178297e
2025-08-05 01:31:44,211 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:31:44,326 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:31:44,327 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:31:44,529 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:31:44,731 - ERROR - [__main__] ❌ Error in authentication flow for session dcaac6ea-3c9e-4fe8-a9b6-9e969178297e: Protocol message StarCitizenMessage has no "reconcile_account_update_notification" field.
2025-08-05 01:31:44,733 - ERROR - [__main__] Traceback: Traceback (most recent call last):
  File "H:\star.c\backup_grpc_server\diffusion_server.py", line 424, in trigger_authentication_flow
    await self.send_reconcile_account_update(writer, auth_data, session_id, sequence_number)
  File "H:\star.c\backup_grpc_server\diffusion_server.py", line 534, in send_reconcile_account_update
    star_msg = star_network_pb2.StarCitizenMessage(
        reconcile_account_update_notification=reconcile_msg,
    ...<3 lines>...
        session_id=session_id
    )
ValueError: Protocol message StarCitizenMessage has no "reconcile_account_update_notification" field.

2025-08-05 01:31:53,686 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:31:53,686 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:31:53,686 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346713686
session_token: "sc_session_1754346693_dcaac6ea"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:31:53,686 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:32:23,796 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 57955) disconnected (session: dcaac6ea-3c9e-4fe8-a9b6-9e969178297e)
2025-08-05 01:32:23,797 - INFO - [__main__] 📊 Session stats: 50.1s duration, 5 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 01:33:15,275 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58007 (session: 27e800c6-7b66-48de-a7f9-cd33c397e777)
2025-08-05 01:33:15,292 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:33:15,292 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 01:33:15,292 - INFO - [__main__] 🔍 Service discovery request from session 27e800c6-7b66-48de-a7f9-cd33c397e777
2025-08-05 01:33:15,292 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754346795292

2025-08-05 01:33:15,292 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:33:15,402 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:33:15,402 - INFO - [__main__] 🎮 Lobby destinations request from session 27e800c6-7b66-48de-a7f9-cd33c397e777
2025-08-05 01:33:15,403 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754346795403

2025-08-05 01:33:15,403 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:33:15,538 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:33:15,538 - INFO - [__main__] 🌍 Region setup request from session 27e800c6-7b66-48de-a7f9-cd33c397e777
2025-08-05 01:33:15,538 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:33:15,538 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:33:41,429 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:33:41,429 - INFO - [__main__] ================================================================================
2025-08-05 01:33:41,429 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:33:41,429 - INFO - [__main__] ================================================================================
2025-08-05 01:33:41,429 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:33:41,429 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:33:41,429 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:33:41,430 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:33:41,430 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:33:41,430 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:33:41,430 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:33:41,430 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:33:41,430 - INFO - [__main__] 
2025-08-05 01:33:41,430 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:33:41,430 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:33:41,430 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:33:41,431 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:33:41,431 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:33:41,431 - INFO - [__main__] ================================================================================
2025-08-05 01:33:41,431 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:33:41,431 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:34:03,603 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58044 (session: 0d3f897d-48e5-4bb6-9e52-93aa34289df4)
2025-08-05 01:34:03,620 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:34:03,620 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:34:03,620 - INFO - [__main__] 🔍 Service discovery request from session 0d3f897d-48e5-4bb6-9e52-93aa34289df4
2025-08-05 01:34:03,620 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754346843620

2025-08-05 01:34:03,620 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:34:03,721 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:34:03,721 - INFO - [__main__] 🎮 Lobby destinations request from session 0d3f897d-48e5-4bb6-9e52-93aa34289df4
2025-08-05 01:34:03,721 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754346843721

2025-08-05 01:34:03,722 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:34:03,912 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:34:03,913 - INFO - [__main__] 🌍 Region setup request from session 0d3f897d-48e5-4bb6-9e52-93aa34289df4
2025-08-05 01:34:03,913 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:34:03,913 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:34:13,614 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:34:13,615 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:34:13,615 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346853615
session_token: "sc_session_1754346843_0d3f897d"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:34:13,615 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:34:14,122 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 0d3f897d-48e5-4bb6-9e52-93aa34289df4
2025-08-05 01:34:14,123 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:34:14,230 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:34:14,231 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:34:14,434 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:34:14,634 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 01:34:14,836 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 01:34:15,349 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:34:15,349 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58044) disconnected (session: 0d3f897d-48e5-4bb6-9e52-93aa34289df4)
2025-08-05 01:34:15,349 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:34:15,349 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 0d3f897d-48e5-4bb6-9e52-93aa34289df4
2025-08-05 01:34:15,349 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:34:33,713 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58052 (session: 0bc70b68-2000-47f6-bd4d-41229d1c4b1f)
2025-08-05 01:34:33,730 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:34:33,730 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:34:33,730 - INFO - [__main__] 🔍 Service discovery request from session 0bc70b68-2000-47f6-bd4d-41229d1c4b1f
2025-08-05 01:34:33,730 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754346873730

2025-08-05 01:34:33,730 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:34:43,613 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:34:43,614 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:34:43,614 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346883614
session_token: "sc_session_1754346873_0bc70b68"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:34:43,614 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:34:43,727 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:34:43,728 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:34:43,728 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346883728
session_token: "sc_session_1754346873_0bc70b68"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:34:43,728 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:34:44,122 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 0bc70b68-2000-47f6-bd4d-41229d1c4b1f
2025-08-05 01:34:44,123 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:34:44,231 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:34:44,232 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:34:44,232 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58052) disconnected (session: 0bc70b68-2000-47f6-bd4d-41229d1c4b1f)
2025-08-05 01:34:44,232 - INFO - [__main__] 📊 Session stats: 10.5s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 01:34:44,435 - ERROR - [__main__] ❌ Error in authentication flow for session 0bc70b68-2000-47f6-bd4d-41229d1c4b1f: Connection lost
2025-08-05 01:34:44,439 - ERROR - [__main__] Traceback: Traceback (most recent call last):
  File "H:\star.c\backup_grpc_server\diffusion_server.py", line 420, in trigger_authentication_flow
    await self.send_account_login_character_status(writer, auth_data, session_id, sequence_number)
  File "H:\star.c\backup_grpc_server\diffusion_server.py", line 523, in send_account_login_character_status
    await self.send_protobuf_message(writer, star_msg)
  File "H:\star.c\backup_grpc_server\diffusion_server.py", line 598, in send_protobuf_message
    await writer.drain()
  File "C:\Python313\Lib\asyncio\streams.py", line 386, in drain
    await self._protocol._drain_helper()
  File "C:\Python313\Lib\asyncio\streams.py", line 166, in _drain_helper
    raise ConnectionResetError('Connection lost')
ConnectionResetError: Connection lost

2025-08-05 01:35:57,264 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:35:57,264 - INFO - [__main__] ================================================================================
2025-08-05 01:35:57,265 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:35:57,265 - INFO - [__main__] ================================================================================
2025-08-05 01:35:57,265 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:35:57,265 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:35:57,265 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:35:57,265 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:35:57,265 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:35:57,265 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:35:57,265 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:35:57,265 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:35:57,265 - INFO - [__main__] 
2025-08-05 01:35:57,265 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:35:57,265 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:35:57,265 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:35:57,265 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:35:57,265 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:35:57,266 - INFO - [__main__] ================================================================================
2025-08-05 01:35:57,266 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:35:57,266 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:36:18,208 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58079 (session: 5df6a5c8-5173-4f37-9bdb-28208eb2082d)
2025-08-05 01:36:18,224 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:36:18,224 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:36:18,224 - INFO - [__main__] 🔍 Service discovery request from session 5df6a5c8-5173-4f37-9bdb-28208eb2082d
2025-08-05 01:36:18,224 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754346978224

2025-08-05 01:36:18,224 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:36:18,325 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:36:18,326 - INFO - [__main__] 🎮 Lobby destinations request from session 5df6a5c8-5173-4f37-9bdb-28208eb2082d
2025-08-05 01:36:18,326 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754346978326

2025-08-05 01:36:18,326 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:36:18,490 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:36:18,490 - INFO - [__main__] 🌍 Region setup request from session 5df6a5c8-5173-4f37-9bdb-28208eb2082d
2025-08-05 01:36:18,490 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:36:18,490 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:36:28,223 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:36:28,223 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:36:28,223 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754346988223
session_token: "sc_session_1754346978_5df6a5c8"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:36:28,223 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:36:28,726 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 5df6a5c8-5173-4f37-9bdb-28208eb2082d
2025-08-05 01:36:28,727 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:36:28,836 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:36:28,836 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:36:29,040 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:36:29,245 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 01:36:29,446 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 01:36:29,959 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:36:29,959 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58079) disconnected (session: 5df6a5c8-5173-4f37-9bdb-28208eb2082d)
2025-08-05 01:36:29,959 - INFO - [__main__] 📊 Session stats: 11.8s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:36:29,960 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 5df6a5c8-5173-4f37-9bdb-28208eb2082d
2025-08-05 01:36:29,960 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:36:48,316 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58090 (session: 40ae2659-d27d-47c1-83d1-50abe8cd405d)
2025-08-05 01:36:48,333 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:36:48,333 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:36:48,333 - INFO - [__main__] 🔍 Service discovery request from session 40ae2659-d27d-47c1-83d1-50abe8cd405d
2025-08-05 01:36:48,334 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754347008334

2025-08-05 01:36:48,334 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:36:58,219 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:36:58,219 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:36:58,219 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347018219
session_token: "sc_session_1754347008_40ae2659"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:36:58,220 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:36:58,330 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:36:58,331 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:36:58,331 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347018331
session_token: "sc_session_1754347008_40ae2659"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:36:58,331 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:36:58,725 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 40ae2659-d27d-47c1-83d1-50abe8cd405d
2025-08-05 01:36:58,726 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:36:58,835 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:36:58,835 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:36:59,038 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:36:59,253 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 01:36:59,457 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 01:36:59,958 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:36:59,959 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58090) disconnected (session: 40ae2659-d27d-47c1-83d1-50abe8cd405d)
2025-08-05 01:36:59,959 - INFO - [__main__] 📊 Session stats: 11.6s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 01:36:59,970 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 40ae2659-d27d-47c1-83d1-50abe8cd405d
2025-08-05 01:36:59,970 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:37:08,423 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58095 (session: 612a2486-379a-4fc8-bba9-27f932a751e5)
2025-08-05 01:37:08,445 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:37:08,445 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:37:08,445 - INFO - [__main__] 🔍 Service discovery request from session 612a2486-379a-4fc8-bba9-27f932a751e5
2025-08-05 01:37:08,445 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754347028445

2025-08-05 01:37:08,445 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:37:18,223 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:37:18,223 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:37:18,224 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347038224
session_token: "sc_session_1754347028_612a2486"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:37:18,224 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:37:18,331 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:37:18,331 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:37:18,332 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347038332
session_token: "sc_session_1754347028_612a2486"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:37:18,332 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:37:18,440 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 01:37:18,440 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:37:18,440 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347038440
session_token: "sc_session_1754347028_612a2486"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:37:18,441 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:37:18,730 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 612a2486-379a-4fc8-bba9-27f932a751e5
2025-08-05 01:37:18,730 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:37:18,841 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:37:18,841 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:37:19,046 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:37:19,249 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 01:37:19,455 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 01:37:19,956 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:37:19,956 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58095) disconnected (session: 612a2486-379a-4fc8-bba9-27f932a751e5)
2025-08-05 01:37:19,957 - INFO - [__main__] 📊 Session stats: 11.5s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-05 01:37:19,957 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 612a2486-379a-4fc8-bba9-27f932a751e5
2025-08-05 01:37:19,957 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:37:28,427 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58101 (session: 349435e0-f402-44f8-9d5c-ed381d6994ec)
2025-08-05 01:37:28,443 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:37:28,444 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:37:28,444 - INFO - [__main__] 🔍 Service discovery request from session 349435e0-f402-44f8-9d5c-ed381d6994ec
2025-08-05 01:37:28,444 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754347048444

2025-08-05 01:37:28,444 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:37:58,556 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58101) disconnected (session: 349435e0-f402-44f8-9d5c-ed381d6994ec)
2025-08-05 01:37:58,556 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 01:46:32,817 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 01:46:32,817 - INFO - [__main__] ================================================================================
2025-08-05 01:46:32,817 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 01:46:32,818 - INFO - [__main__] ================================================================================
2025-08-05 01:46:32,818 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 01:46:32,818 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 01:46:32,818 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 01:46:32,818 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 01:46:32,818 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 01:46:32,818 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 01:46:32,818 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 01:46:32,818 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 01:46:32,818 - INFO - [__main__] 
2025-08-05 01:46:32,818 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 01:46:32,818 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 01:46:32,818 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 01:46:32,818 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 01:46:32,818 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 01:46:32,819 - INFO - [__main__] ================================================================================
2025-08-05 01:46:32,819 - INFO - [__main__] � SSL disabled for MITM compatibility
2025-08-05 01:46:32,819 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (SSL disabled for MITM)
2025-08-05 01:47:04,675 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58200 (session: 16267337-8ca9-4027-b9fa-060c71a11703)
2025-08-05 01:47:04,692 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:47:04,692 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:47:04,692 - INFO - [__main__] 🔍 Service discovery request from session 16267337-8ca9-4027-b9fa-060c71a11703
2025-08-05 01:47:04,693 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754347624693

2025-08-05 01:47:04,693 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:47:04,800 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 01:47:04,801 - INFO - [__main__] 🎮 Lobby destinations request from session 16267337-8ca9-4027-b9fa-060c71a11703
2025-08-05 01:47:04,801 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754347624801

2025-08-05 01:47:04,801 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 01:47:04,968 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 01:47:04,969 - INFO - [__main__] 🌍 Region setup request from session 16267337-8ca9-4027-b9fa-060c71a11703
2025-08-05 01:47:04,969 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 01:47:04,969 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 01:47:14,688 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 01:47:14,688 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 01:47:14,688 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754347634688
session_token: "sc_session_1754347624_16267337"
keep_alive: true
heartbeat_interval: 30

2025-08-05 01:47:14,688 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 01:47:15,194 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 16267337-8ca9-4027-b9fa-060c71a11703
2025-08-05 01:47:15,195 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 01:47:15,303 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 01:47:15,303 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 01:47:15,506 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 01:47:15,708 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 01:47:15,910 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 01:47:16,421 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 01:47:16,422 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58200) disconnected (session: 16267337-8ca9-4027-b9fa-060c71a11703)
2025-08-05 01:47:16,422 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 01:47:16,422 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 16267337-8ca9-4027-b9fa-060c71a11703
2025-08-05 01:47:16,422 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 01:47:34,795 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58207 (session: 848e3d5f-f41a-4e8a-a8c2-a9a33c69cd10)
2025-08-05 01:47:34,812 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 01:47:34,812 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 01:47:34,812 - INFO - [__main__] 🔍 Service discovery request from session 848e3d5f-f41a-4e8a-a8c2-a9a33c69cd10
2025-08-05 01:47:34,812 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754347654812

2025-08-05 01:47:34,812 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 01:48:04,923 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58207) disconnected (session: 848e3d5f-f41a-4e8a-a8c2-a9a33c69cd10)
2025-08-05 01:48:04,924 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 01:51:41,298 - INFO - [__main__] 🚀 Diffusion Server with Queue Progression listening on 127.0.0.1:8000
2025-08-05 01:51:41,298 - INFO - [__main__] 📋 Services: Heartbeat, Service Discovery, Queue Progression
2025-08-05 01:51:59,566 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58296 (session: 4cd82159-6b91-41d6-b3dc-85de7960e8ea)
2025-08-05 01:52:12,555 - INFO - [__main__] 🔌 Client 4cd82159-6b91-41d6-b3dc-85de7960e8ea disconnected
2025-08-05 01:52:12,607 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58305 (session: 5fd5d065-dfe7-43b0-b5b4-33b378cbc4ac)
2025-08-05 01:52:33,798 - ERROR - [__main__] ❌ Error handling client 5fd5d065-dfe7-43b0-b5b4-33b378cbc4ac: [WinError 64] The specified network name is no longer available
2025-08-05 01:52:33,798 - ERROR - [asyncio] Unhandled exception in client_connected_cb
transport: <_ProactorSocketTransport closed>
Traceback (most recent call last):
  File "C:\Python313\Lib\asyncio\windows_events.py", line 463, in finish_socket_func
    return ov.getresult()
           ~~~~~~~~~~~~^^
OSError: [WinError 64] The specified network name is no longer available

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\star.c\backup_grpc_server\diffusion_server_complete.py", line 124, in handle_client
    await writer.wait_closed()
  File "C:\Python313\Lib\asyncio\streams.py", line 358, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "C:\Python313\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
  File "C:\Python313\Lib\asyncio\windows_events.py", line 804, in _poll
    value = callback(transferred, key, ov)
  File "C:\Python313\Lib\asyncio\windows_events.py", line 467, in finish_socket_func
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] The specified network name is no longer available
2025-08-05 01:54:20,185 - INFO - [__main__] 🚀 Diffusion Server with Queue Progression listening on 127.0.0.1:8000
2025-08-05 01:54:20,186 - INFO - [__main__] 📋 Services: Heartbeat, Service Discovery, Queue Progression
2025-08-05 01:54:37,468 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58366 (session: aa9390f6-02a0-4dba-9cde-d50eb15f46e7)
2025-08-05 01:54:50,458 - INFO - [__main__] 🔌 Client aa9390f6-02a0-4dba-9cde-d50eb15f46e7 disconnected
2025-08-05 01:54:50,510 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58372 (session: 164d877c-45db-4fbe-89e4-559856e79379)
2025-08-05 01:55:01,388 - ERROR - [__main__] ❌ Error handling client 164d877c-45db-4fbe-89e4-559856e79379: [WinError 64] The specified network name is no longer available
2025-08-05 01:55:01,388 - INFO - [__main__] 🔌 Client 164d877c-45db-4fbe-89e4-559856e79379 disconnected
2025-08-05 01:58:09,066 - INFO - [__main__] 🔒 SSL certificate loaded
2025-08-05 01:58:09,066 - INFO - [__main__] 🚀 Diffusion Server (SSL) listening on 127.0.0.1:8000
2025-08-05 01:58:35,836 - INFO - [__main__] 🔒 SSL certificate loaded
2025-08-05 01:58:35,836 - INFO - [__main__] 🚀 Diffusion Server (SSL) listening on 127.0.0.1:8000
2025-08-05 01:58:53,994 - INFO - [__main__] 🔌 New client from 127.0.0.1:58426 (1c6627db-d0a6-4994-886d-4412db2ce948)
2025-08-05 01:58:54,034 - INFO - [__main__] 🔌 Client 1c6627db-d0a6-4994-886d-4412db2ce948 disconnected
2025-08-05 01:58:54,114 - INFO - [__main__] 🔌 New client from 127.0.0.1:58427 (cac492e0-54e1-4259-8d92-2a06a3a4de67)
2025-08-05 01:58:54,150 - INFO - [__main__] 🔌 Client cac492e0-54e1-4259-8d92-2a06a3a4de67 disconnected
2025-08-05 01:58:54,232 - INFO - [__main__] 🔌 New client from 127.0.0.1:58428 (1645f00f-e022-4377-852a-0138feae07dd)
2025-08-05 01:58:54,272 - INFO - [__main__] 🔌 Client 1645f00f-e022-4377-852a-0138feae07dd disconnected
2025-08-05 01:58:54,353 - INFO - [__main__] 🔌 New client from 127.0.0.1:58430 (069f5579-a8bd-42b3-a3df-2a8365908c7d)
2025-08-05 01:58:54,394 - INFO - [__main__] 🔌 Client 069f5579-a8bd-42b3-a3df-2a8365908c7d disconnected
2025-08-05 01:58:54,474 - INFO - [__main__] 🔌 New client from 127.0.0.1:58431 (15a64202-414b-42a1-be7a-ec4199e1c6b4)
2025-08-05 01:58:54,514 - INFO - [__main__] 🔌 Client 15a64202-414b-42a1-be7a-ec4199e1c6b4 disconnected
2025-08-05 01:58:54,593 - INFO - [__main__] 🔌 New client from 127.0.0.1:58432 (7fc850da-96d8-4946-ae27-cc96b5780a10)
2025-08-05 01:58:54,632 - INFO - [__main__] 🔌 Client 7fc850da-96d8-4946-ae27-cc96b5780a10 disconnected
2025-08-05 01:58:54,713 - INFO - [__main__] 🔌 New client from 127.0.0.1:58433 (3cdb73cf-3654-47c0-bb04-42d5506e72a9)
2025-08-05 01:58:54,753 - INFO - [__main__] 🔌 Client 3cdb73cf-3654-47c0-bb04-42d5506e72a9 disconnected
2025-08-05 01:58:54,834 - INFO - [__main__] 🔌 New client from 127.0.0.1:58434 (d69d255e-ebd1-44c4-9ac4-9d018c03580f)
2025-08-05 01:58:54,873 - INFO - [__main__] 🔌 Client d69d255e-ebd1-44c4-9ac4-9d018c03580f disconnected
2025-08-05 01:58:54,953 - INFO - [__main__] 🔌 New client from 127.0.0.1:58435 (a69bffef-3009-42d1-8509-e2385a7c97d4)
2025-08-05 01:58:54,993 - INFO - [__main__] 🔌 Client a69bffef-3009-42d1-8509-e2385a7c97d4 disconnected
2025-08-05 01:58:55,073 - INFO - [__main__] 🔌 New client from 127.0.0.1:58436 (1ce0acf4-b71a-4c43-b7ae-e5a8251b3372)
2025-08-05 01:58:55,114 - INFO - [__main__] 🔌 Client 1ce0acf4-b71a-4c43-b7ae-e5a8251b3372 disconnected
2025-08-05 01:58:55,193 - INFO - [__main__] 🔌 New client from 127.0.0.1:58437 (8386e0b3-1f7c-4853-be4e-3853e5a69ac4)
2025-08-05 01:58:55,233 - INFO - [__main__] 🔌 Client 8386e0b3-1f7c-4853-be4e-3853e5a69ac4 disconnected
2025-08-05 01:58:55,313 - INFO - [__main__] 🔌 New client from 127.0.0.1:58438 (ba01cfb4-edf4-4c78-919c-acb5ba0ba0a1)
2025-08-05 01:58:55,353 - INFO - [__main__] 🔌 Client ba01cfb4-edf4-4c78-919c-acb5ba0ba0a1 disconnected
2025-08-05 01:58:55,433 - INFO - [__main__] 🔌 New client from 127.0.0.1:58439 (f65097b6-c432-47e2-b5ee-483097f851c7)
2025-08-05 01:58:55,474 - INFO - [__main__] 🔌 Client f65097b6-c432-47e2-b5ee-483097f851c7 disconnected
2025-08-05 01:58:55,553 - INFO - [__main__] 🔌 New client from 127.0.0.1:58440 (d116c055-beed-4aaa-8dee-34fd0b3f971c)
2025-08-05 01:58:55,594 - INFO - [__main__] 🔌 Client d116c055-beed-4aaa-8dee-34fd0b3f971c disconnected
2025-08-05 01:58:55,673 - INFO - [__main__] 🔌 New client from 127.0.0.1:58441 (8341eef7-b8d6-4ed1-be00-f665f1fc7dad)
2025-08-05 01:58:55,714 - INFO - [__main__] 🔌 Client 8341eef7-b8d6-4ed1-be00-f665f1fc7dad disconnected
2025-08-05 01:58:55,793 - INFO - [__main__] 🔌 New client from 127.0.0.1:58442 (ecfcfdc4-a6b6-4a28-b212-63d05c95c254)
2025-08-05 01:58:55,834 - INFO - [__main__] 🔌 Client ecfcfdc4-a6b6-4a28-b212-63d05c95c254 disconnected
2025-08-05 01:58:55,913 - INFO - [__main__] 🔌 New client from 127.0.0.1:58443 (2a7d8b4b-7823-44a1-8847-4f329e357272)
2025-08-05 01:58:55,953 - INFO - [__main__] 🔌 Client 2a7d8b4b-7823-44a1-8847-4f329e357272 disconnected
2025-08-05 01:58:56,033 - INFO - [__main__] 🔌 New client from 127.0.0.1:58444 (51e5a065-c75d-428b-b882-545e1d7a3e25)
2025-08-05 01:58:56,073 - INFO - [__main__] 🔌 Client 51e5a065-c75d-428b-b882-545e1d7a3e25 disconnected
2025-08-05 01:58:56,153 - INFO - [__main__] 🔌 New client from 127.0.0.1:58445 (e0506e81-24ec-4ae6-b060-b249dfe0f4dc)
2025-08-05 01:58:56,193 - INFO - [__main__] 🔌 Client e0506e81-24ec-4ae6-b060-b249dfe0f4dc disconnected
2025-08-05 01:58:56,274 - INFO - [__main__] 🔌 New client from 127.0.0.1:58446 (334ef218-57bc-4acc-835e-5eb7cb11b609)
2025-08-05 01:58:56,310 - INFO - [__main__] 🔌 Client 334ef218-57bc-4acc-835e-5eb7cb11b609 disconnected
2025-08-05 01:58:56,391 - INFO - [__main__] 🔌 New client from 127.0.0.1:58448 (b6e6a1cd-3896-466b-a86d-a39deb17e2e8)
2025-08-05 01:58:56,432 - INFO - [__main__] 🔌 Client b6e6a1cd-3896-466b-a86d-a39deb17e2e8 disconnected
2025-08-05 01:58:56,513 - INFO - [__main__] 🔌 New client from 127.0.0.1:58449 (5b3b944a-e1fa-49be-be2f-c9bc5019cd64)
2025-08-05 01:58:56,553 - INFO - [__main__] 🔌 Client 5b3b944a-e1fa-49be-be2f-c9bc5019cd64 disconnected
2025-08-05 01:58:56,634 - INFO - [__main__] 🔌 New client from 127.0.0.1:58450 (e72606e9-6332-4740-ae0b-ccb2feb417f6)
2025-08-05 01:58:56,673 - INFO - [__main__] 🔌 Client e72606e9-6332-4740-ae0b-ccb2feb417f6 disconnected
2025-08-05 01:58:56,750 - INFO - [__main__] 🔌 New client from 127.0.0.1:58451 (75f26683-98c1-4953-88bc-304e9a0b2146)
2025-08-05 01:58:56,790 - INFO - [__main__] 🔌 Client 75f26683-98c1-4953-88bc-304e9a0b2146 disconnected
2025-08-05 01:58:56,870 - INFO - [__main__] 🔌 New client from 127.0.0.1:58452 (83ad0c37-4d1c-4f99-bb75-1d1647a17525)
2025-08-05 01:58:56,910 - INFO - [__main__] 🔌 Client 83ad0c37-4d1c-4f99-bb75-1d1647a17525 disconnected
2025-08-05 01:58:56,990 - INFO - [__main__] 🔌 New client from 127.0.0.1:58453 (d0ed482e-72db-4d42-a787-e5d06ff89a75)
2025-08-05 01:58:57,030 - INFO - [__main__] 🔌 Client d0ed482e-72db-4d42-a787-e5d06ff89a75 disconnected
2025-08-05 01:58:57,110 - INFO - [__main__] 🔌 New client from 127.0.0.1:58454 (cdf3911a-805a-4f27-ac59-6d7b15201513)
2025-08-05 01:58:57,151 - INFO - [__main__] 🔌 Client cdf3911a-805a-4f27-ac59-6d7b15201513 disconnected
2025-08-05 01:58:57,233 - INFO - [__main__] 🔌 New client from 127.0.0.1:58455 (87c07dda-56ec-4c75-b34c-5aadfc42e95c)
2025-08-05 01:58:57,273 - INFO - [__main__] 🔌 Client 87c07dda-56ec-4c75-b34c-5aadfc42e95c disconnected
2025-08-05 01:58:57,354 - INFO - [__main__] 🔌 New client from 127.0.0.1:58456 (cd2a4f94-c768-45c3-81d1-2d92e774fcf5)
2025-08-05 01:58:57,394 - INFO - [__main__] 🔌 Client cd2a4f94-c768-45c3-81d1-2d92e774fcf5 disconnected
2025-08-05 01:58:57,475 - INFO - [__main__] 🔌 New client from 127.0.0.1:58457 (5c5d6cee-f9df-49b7-a022-8799d6a2b10a)
2025-08-05 01:58:57,510 - INFO - [__main__] 🔌 Client 5c5d6cee-f9df-49b7-a022-8799d6a2b10a disconnected
2025-08-05 01:58:57,590 - INFO - [__main__] 🔌 New client from 127.0.0.1:58458 (6b277f07-a439-47f4-a577-643c8b9b2977)
2025-08-05 01:58:57,631 - INFO - [__main__] 🔌 Client 6b277f07-a439-47f4-a577-643c8b9b2977 disconnected
2025-08-05 01:58:57,711 - INFO - [__main__] 🔌 New client from 127.0.0.1:58459 (81344b62-1ba6-46e3-b4d6-f3d09ee84d5c)
2025-08-05 01:58:57,751 - INFO - [__main__] 🔌 Client 81344b62-1ba6-46e3-b4d6-f3d09ee84d5c disconnected
2025-08-05 01:58:57,832 - INFO - [__main__] 🔌 New client from 127.0.0.1:58460 (573d9da7-ee5a-48c5-960b-a258912305bc)
2025-08-05 01:58:57,998 - ERROR - [__main__] ❌ Error handling 573d9da7-ee5a-48c5-960b-a258912305bc: [WinError 64] The specified network name is no longer available
2025-08-05 01:58:57,998 - INFO - [__main__] 🔌 Client 573d9da7-ee5a-48c5-960b-a258912305bc disconnected
2025-08-05 02:30:21,734 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:30:21,734 - INFO - [__main__] ================================================================================
2025-08-05 02:30:21,734 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:30:21,734 - INFO - [__main__] ================================================================================
2025-08-05 02:30:21,734 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:30:21,734 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:30:21,734 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:30:21,734 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:30:21,734 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:30:21,734 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:30:21,734 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:30:21,734 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:30:21,734 - INFO - [__main__] 
2025-08-05 02:30:21,734 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:30:21,734 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:30:21,734 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:30:21,734 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:30:21,734 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:30:21,734 - INFO - [__main__] ================================================================================
2025-08-05 02:30:21,734 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:30:21,735 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 02:33:28,944 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:33:28,944 - INFO - [__main__] ================================================================================
2025-08-05 02:33:28,944 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:33:28,945 - INFO - [__main__] ================================================================================
2025-08-05 02:33:28,945 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:33:28,945 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:33:28,945 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:33:28,945 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:33:28,945 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:33:28,945 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:33:28,945 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:33:28,945 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:33:28,945 - INFO - [__main__] 
2025-08-05 02:33:28,945 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:33:28,945 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:33:28,945 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:33:28,946 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:33:28,946 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:33:28,946 - INFO - [__main__] ================================================================================
2025-08-05 02:33:28,946 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:33:28,946 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:33:28,946 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:33:28,946 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:33:55,391 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:33:55,391 - INFO - [__main__] ================================================================================
2025-08-05 02:33:55,391 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:33:55,391 - INFO - [__main__] ================================================================================
2025-08-05 02:33:55,391 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:33:55,391 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:33:55,391 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:33:55,391 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:33:55,391 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:33:55,391 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:33:55,391 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:33:55,391 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:33:55,391 - INFO - [__main__] 
2025-08-05 02:33:55,392 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:33:55,392 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:33:55,392 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:33:55,392 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:33:55,392 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:33:55,392 - INFO - [__main__] ================================================================================
2025-08-05 02:33:55,392 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:33:55,392 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:33:55,392 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:33:55,392 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:34:08,469 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:34:08,469 - INFO - [__main__] ================================================================================
2025-08-05 02:34:08,469 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:34:08,469 - INFO - [__main__] ================================================================================
2025-08-05 02:34:08,469 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:34:08,469 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:34:08,469 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:34:08,469 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:34:08,469 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:34:08,469 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:34:08,469 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:34:08,469 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:34:08,469 - INFO - [__main__] 
2025-08-05 02:34:08,469 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:34:08,469 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:34:08,469 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:34:08,470 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:34:08,470 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:34:08,470 - INFO - [__main__] ================================================================================
2025-08-05 02:34:08,470 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:34:08,470 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:34:08,470 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:34:08,470 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:34:48,056 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:34:48,057 - INFO - [__main__] ================================================================================
2025-08-05 02:34:48,057 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:34:48,057 - INFO - [__main__] ================================================================================
2025-08-05 02:34:48,057 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:34:48,057 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:34:48,057 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:34:48,057 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:34:48,057 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:34:48,057 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:34:48,057 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:34:48,058 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:34:48,058 - INFO - [__main__] 
2025-08-05 02:34:48,058 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:34:48,058 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:34:48,058 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:34:48,058 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:34:48,058 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:34:48,058 - INFO - [__main__] ================================================================================
2025-08-05 02:34:48,058 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:34:48,058 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:34:48,058 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:34:48,059 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:36:19,651 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:36:19,651 - INFO - [__main__] ================================================================================
2025-08-05 02:36:19,651 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:36:19,652 - INFO - [__main__] ================================================================================
2025-08-05 02:36:19,652 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:36:19,652 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:36:19,652 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:36:19,652 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:36:19,652 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:36:19,652 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:36:19,652 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:36:19,652 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:36:19,652 - INFO - [__main__] 
2025-08-05 02:36:19,653 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:36:19,653 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:36:19,653 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:36:19,653 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:36:19,653 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:36:19,653 - INFO - [__main__] ================================================================================
2025-08-05 02:36:19,653 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:36:19,653 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 02:36:46,455 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59263 (session: f8c0c067-74bf-4292-bc93-9e4b0d5a5a96)
2025-08-05 02:36:46,471 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:36:46,471 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 02:36:46,471 - INFO - [__main__] 🔍 Service discovery request from session f8c0c067-74bf-4292-bc93-9e4b0d5a5a96
2025-08-05 02:36:46,471 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754350606471

2025-08-05 02:36:46,472 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:36:46,588 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 02:36:46,588 - INFO - [__main__] 🎮 Lobby destinations request from session f8c0c067-74bf-4292-bc93-9e4b0d5a5a96
2025-08-05 02:36:46,588 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754350606588

2025-08-05 02:36:46,588 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 02:36:46,751 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 02:36:46,752 - INFO - [__main__] 🌍 Region setup request from session f8c0c067-74bf-4292-bc93-9e4b0d5a5a96
2025-08-05 02:36:46,752 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 02:36:46,752 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 02:36:56,466 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 02:36:56,467 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 02:36:56,467 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754350616467
session_token: "sc_session_1754350606_f8c0c067"
keep_alive: true
heartbeat_interval: 30

2025-08-05 02:36:56,467 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 02:36:56,982 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session f8c0c067-74bf-4292-bc93-9e4b0d5a5a96
2025-08-05 02:36:56,983 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 02:36:57,090 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 02:36:57,090 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 02:36:57,292 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 02:36:57,497 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 02:36:57,701 - INFO - [__main__] 📤 Sent LoginCompletedMessage (wrapped)
2025-08-05 02:36:58,215 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 02:36:58,216 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59263) disconnected (session: f8c0c067-74bf-4292-bc93-9e4b0d5a5a96)
2025-08-05 02:36:58,216 - INFO - [__main__] 📊 Session stats: 11.8s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 02:36:58,216 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session f8c0c067-74bf-4292-bc93-9e4b0d5a5a96
2025-08-05 02:36:58,216 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 02:37:16,567 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59270 (session: 76e39607-2746-47f7-9bdd-9100daca3ca7)
2025-08-05 02:37:16,583 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:37:16,583 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 02:37:16,583 - INFO - [__main__] 🔍 Service discovery request from session 76e39607-2746-47f7-9bdd-9100daca3ca7
2025-08-05 02:37:16,584 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754350636584

2025-08-05 02:37:16,584 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:37:46,705 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59270) disconnected (session: 76e39607-2746-47f7-9bdd-9100daca3ca7)
2025-08-05 02:37:46,706 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 02:42:32,234 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:42:32,234 - INFO - [__main__] ================================================================================
2025-08-05 02:42:32,234 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:42:32,234 - INFO - [__main__] ================================================================================
2025-08-05 02:42:32,234 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:42:32,234 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:42:32,234 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:42:32,234 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:42:32,234 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:42:32,234 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:42:32,234 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:42:32,234 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:42:32,234 - INFO - [__main__] 
2025-08-05 02:42:32,234 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:42:32,234 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:42:32,234 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:42:32,234 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:42:32,234 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:42:32,234 - INFO - [__main__] ================================================================================
2025-08-05 02:42:32,234 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:42:32,235 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 02:43:32,181 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59374 (session: a48917c3-218a-4988-8469-dc2287ff736a)
2025-08-05 02:43:32,199 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:43:32,207 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:43:32,207 - INFO - [__main__] 🔍 Service discovery request from session a48917c3-218a-4988-8469-dc2287ff736a
2025-08-05 02:43:32,207 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351012207

2025-08-05 02:43:32,208 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:43:32,321 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 02:43:32,322 - INFO - [__main__] 🎮 Lobby destinations request from session a48917c3-218a-4988-8469-dc2287ff736a
2025-08-05 02:43:32,322 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754351012322

2025-08-05 02:43:32,322 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 02:43:32,472 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 02:43:32,472 - INFO - [__main__] 🌍 Region setup request from session a48917c3-218a-4988-8469-dc2287ff736a
2025-08-05 02:43:32,472 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 02:43:32,472 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 02:43:42,195 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 02:43:42,195 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 02:43:42,195 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754351022195
session_token: "sc_session_1754351012_a48917c3"
keep_alive: true
heartbeat_interval: 30

2025-08-05 02:43:42,195 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 02:43:42,703 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session a48917c3-218a-4988-8469-dc2287ff736a
2025-08-05 02:43:42,703 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 02:43:42,813 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 02:43:42,813 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 02:43:43,014 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 02:43:43,216 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 02:43:43,417 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 02:43:43,417 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 02:43:43,929 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 02:43:43,929 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59374) disconnected (session: a48917c3-218a-4988-8469-dc2287ff736a)
2025-08-05 02:43:43,929 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 02:43:43,930 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session a48917c3-218a-4988-8469-dc2287ff736a
2025-08-05 02:43:43,930 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 02:44:02,298 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59381 (session: 74288ba4-e5f6-42c1-b35b-82f8d794f4bc)
2025-08-05 02:44:02,320 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:44:02,320 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:44:02,320 - INFO - [__main__] 🔍 Service discovery request from session 74288ba4-e5f6-42c1-b35b-82f8d794f4bc
2025-08-05 02:44:02,320 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351042320

2025-08-05 02:44:02,320 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:44:32,446 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59381) disconnected (session: 74288ba4-e5f6-42c1-b35b-82f8d794f4bc)
2025-08-05 02:44:32,446 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 02:50:47,510 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:50:47,510 - INFO - [__main__] ================================================================================
2025-08-05 02:50:47,510 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:50:47,510 - INFO - [__main__] ================================================================================
2025-08-05 02:50:47,510 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:50:47,511 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:50:47,511 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:50:47,511 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:50:47,511 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:50:47,511 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:50:47,511 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:50:47,511 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:50:47,511 - INFO - [__main__] 
2025-08-05 02:50:47,511 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:50:47,511 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:50:47,511 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:50:47,511 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:50:47,511 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:50:47,511 - INFO - [__main__] ================================================================================
2025-08-05 02:50:47,512 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:50:47,512 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:50:47,512 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:50:47,512 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:51:39,596 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:51:39,597 - INFO - [__main__] ================================================================================
2025-08-05 02:51:39,597 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:51:39,597 - INFO - [__main__] ================================================================================
2025-08-05 02:51:39,597 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:51:39,597 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:51:39,597 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:51:39,597 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:51:39,598 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:51:39,598 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:51:39,598 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:51:39,598 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:51:39,598 - INFO - [__main__] 
2025-08-05 02:51:39,598 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:51:39,598 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:51:39,598 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:51:39,598 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:51:39,598 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:51:39,598 - INFO - [__main__] ================================================================================
2025-08-05 02:51:39,599 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:51:39,599 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 02:52:03,117 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59531 (session: 6664bcde-0d81-40be-a7b4-f54580cf63f8)
2025-08-05 02:52:03,139 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:52:03,139 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:52:03,139 - INFO - [__main__] 🔍 Service discovery request from session 6664bcde-0d81-40be-a7b4-f54580cf63f8
2025-08-05 02:52:03,139 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351523139

2025-08-05 02:52:03,140 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:52:03,241 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 02:52:03,241 - INFO - [__main__] 🎮 Lobby destinations request from session 6664bcde-0d81-40be-a7b4-f54580cf63f8
2025-08-05 02:52:03,241 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754351523241

2025-08-05 02:52:03,241 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 02:52:03,404 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 02:52:03,404 - INFO - [__main__] 🌍 Region setup request from session 6664bcde-0d81-40be-a7b4-f54580cf63f8
2025-08-05 02:52:03,404 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 02:52:03,405 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 02:52:13,134 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 02:52:13,134 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 02:52:13,134 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754351533134
session_token: "sc_session_1754351523_6664bcde"
keep_alive: true
heartbeat_interval: 30

2025-08-05 02:52:13,135 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 02:52:13,638 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 6664bcde-0d81-40be-a7b4-f54580cf63f8
2025-08-05 02:52:13,638 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 02:52:13,746 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 02:52:13,747 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 02:52:13,950 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 02:52:14,155 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 02:52:14,358 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 02:52:14,358 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 02:52:14,869 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 02:52:14,870 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59531) disconnected (session: 6664bcde-0d81-40be-a7b4-f54580cf63f8)
2025-08-05 02:52:14,870 - INFO - [__main__] 📊 Session stats: 11.8s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 02:52:14,870 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 6664bcde-0d81-40be-a7b4-f54580cf63f8
2025-08-05 02:52:14,871 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 02:52:33,226 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59539 (session: b93e7b16-8ca8-4ed2-afaf-093770b8df3a)
2025-08-05 02:52:33,247 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:52:33,247 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:52:33,247 - INFO - [__main__] 🔍 Service discovery request from session b93e7b16-8ca8-4ed2-afaf-093770b8df3a
2025-08-05 02:52:33,247 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351553247

2025-08-05 02:52:33,247 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:53:03,363 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59539) disconnected (session: b93e7b16-8ca8-4ed2-afaf-093770b8df3a)
2025-08-05 02:53:03,363 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 02:56:29,619 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:56:29,619 - INFO - [__main__] ================================================================================
2025-08-05 02:56:29,619 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:56:29,619 - INFO - [__main__] ================================================================================
2025-08-05 02:56:29,619 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:56:29,619 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:56:29,619 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:56:29,619 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:56:29,619 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:56:29,619 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:56:29,619 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:56:29,619 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:56:29,619 - INFO - [__main__] 
2025-08-05 02:56:29,619 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:56:29,619 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:56:29,619 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:56:29,619 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:56:29,619 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:56:29,619 - INFO - [__main__] ================================================================================
2025-08-05 02:56:29,619 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:56:29,620 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-05 02:56:29,620 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-05 02:56:29,620 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-05 02:57:16,155 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 02:57:16,155 - INFO - [__main__] ================================================================================
2025-08-05 02:57:16,156 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 02:57:16,156 - INFO - [__main__] ================================================================================
2025-08-05 02:57:16,156 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 02:57:16,156 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 02:57:16,156 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 02:57:16,156 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 02:57:16,156 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 02:57:16,156 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 02:57:16,156 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 02:57:16,156 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 02:57:16,156 - INFO - [__main__] 
2025-08-05 02:57:16,157 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 02:57:16,157 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 02:57:16,157 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 02:57:16,157 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 02:57:16,157 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 02:57:16,157 - INFO - [__main__] ================================================================================
2025-08-05 02:57:16,157 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 02:57:16,158 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 02:57:36,134 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59633 (session: 431bdc43-ccdf-4552-8364-c1035ed68f12)
2025-08-05 02:57:36,155 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:57:36,155 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:57:36,155 - INFO - [__main__] 🔍 Service discovery request from session 431bdc43-ccdf-4552-8364-c1035ed68f12
2025-08-05 02:57:36,156 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351856156

2025-08-05 02:57:36,156 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:57:36,260 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 02:57:36,260 - INFO - [__main__] 🎮 Lobby destinations request from session 431bdc43-ccdf-4552-8364-c1035ed68f12
2025-08-05 02:57:36,260 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754351856260

2025-08-05 02:57:36,261 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 02:57:36,423 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 02:57:36,423 - INFO - [__main__] 🌍 Region setup request from session 431bdc43-ccdf-4552-8364-c1035ed68f12
2025-08-05 02:57:36,423 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 02:57:36,423 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 02:57:46,152 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 02:57:46,152 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 02:57:46,152 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754351866152
session_token: "sc_session_1754351856_431bdc43"
keep_alive: true
heartbeat_interval: 30

2025-08-05 02:57:46,152 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 02:57:46,665 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 431bdc43-ccdf-4552-8364-c1035ed68f12
2025-08-05 02:57:46,666 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 02:57:46,774 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 02:57:46,774 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 02:57:46,976 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 02:57:47,178 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 02:57:47,379 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 02:57:47,581 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 02:57:47,581 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 02:57:48,096 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 02:57:48,096 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59633) disconnected (session: 431bdc43-ccdf-4552-8364-c1035ed68f12)
2025-08-05 02:57:48,096 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 02:57:48,097 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 431bdc43-ccdf-4552-8364-c1035ed68f12
2025-08-05 02:57:48,097 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 02:58:06,256 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59641 (session: 3a53ae86-64fe-4f28-8a4c-12fa2b59956d)
2025-08-05 02:58:06,280 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 02:58:06,280 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 02:58:06,280 - INFO - [__main__] 🔍 Service discovery request from session 3a53ae86-64fe-4f28-8a4c-12fa2b59956d
2025-08-05 02:58:06,280 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754351886280

2025-08-05 02:58:06,280 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 02:58:36,395 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59641) disconnected (session: 3a53ae86-64fe-4f28-8a4c-12fa2b59956d)
2025-08-05 02:58:36,395 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-05 22:12:05,349 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 22:12:05,349 - INFO - [__main__] ================================================================================
2025-08-05 22:12:05,349 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 22:12:05,349 - INFO - [__main__] ================================================================================
2025-08-05 22:12:05,349 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 22:12:05,350 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 22:12:05,350 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 22:12:05,350 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 22:12:05,350 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 22:12:05,350 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 22:12:05,350 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 22:12:05,350 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 22:12:05,350 - INFO - [__main__] 
2025-08-05 22:12:05,351 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 22:12:05,351 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 22:12:05,351 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 22:12:05,351 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 22:12:05,351 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 22:12:05,351 - INFO - [__main__] ================================================================================
2025-08-05 22:12:05,351 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 22:12:05,352 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 22:15:08,564 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61021 (session: f73217a6-ee65-4803-a1e8-fe525402ad27)
2025-08-05 22:15:08,572 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:15:08,572 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:15:08,572 - INFO - [__main__] 🔍 Service discovery request from session f73217a6-ee65-4803-a1e8-fe525402ad27
2025-08-05 22:15:08,573 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754421308572

2025-08-05 22:15:08,573 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:15:08,681 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 22:15:08,681 - INFO - [__main__] 🎮 Lobby destinations request from session f73217a6-ee65-4803-a1e8-fe525402ad27
2025-08-05 22:15:08,682 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754421308682

2025-08-05 22:15:08,682 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 22:15:08,824 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 22:15:08,824 - INFO - [__main__] 🌍 Region setup request from session f73217a6-ee65-4803-a1e8-fe525402ad27
2025-08-05 22:15:08,824 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 22:15:08,825 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 22:15:38,946 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61021) disconnected (session: f73217a6-ee65-4803-a1e8-fe525402ad27)
2025-08-05 22:15:38,948 - INFO - [__main__] 📊 Session stats: 30.4s duration, 3 messages, stage: region_setup, heartbeats: 0
2025-08-05 22:15:46,115 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 22:15:46,115 - INFO - [__main__] ================================================================================
2025-08-05 22:15:46,115 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 22:15:46,115 - INFO - [__main__] ================================================================================
2025-08-05 22:15:46,115 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 22:15:46,115 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 22:15:46,115 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 22:15:46,116 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 22:15:46,116 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 22:15:46,116 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 22:15:46,116 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 22:15:46,116 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 22:15:46,116 - INFO - [__main__] 
2025-08-05 22:15:46,116 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 22:15:46,116 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 22:15:46,116 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 22:15:46,116 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 22:15:46,116 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 22:15:46,116 - INFO - [__main__] ================================================================================
2025-08-05 22:15:46,117 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 22:15:46,117 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 22:16:11,230 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61052 (session: 28e791a5-fa79-4e70-90d1-fd69a09e1ad9)
2025-08-05 22:16:11,252 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:16:11,252 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:16:11,253 - INFO - [__main__] 🔍 Service discovery request from session 28e791a5-fa79-4e70-90d1-fd69a09e1ad9
2025-08-05 22:16:11,253 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754421371253

2025-08-05 22:16:11,253 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:16:11,355 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 22:16:11,355 - INFO - [__main__] 🎮 Lobby destinations request from session 28e791a5-fa79-4e70-90d1-fd69a09e1ad9
2025-08-05 22:16:11,355 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754421371355

2025-08-05 22:16:11,356 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 22:16:11,543 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 22:16:11,544 - INFO - [__main__] 🌍 Region setup request from session 28e791a5-fa79-4e70-90d1-fd69a09e1ad9
2025-08-05 22:16:11,544 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 22:16:11,544 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 22:16:21,265 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 22:16:21,266 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:16:21,266 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421381266
session_token: "sc_session_1754421371_28e791a5"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:16:21,266 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:16:21,767 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 28e791a5-fa79-4e70-90d1-fd69a09e1ad9
2025-08-05 22:16:21,776 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 22:16:21,891 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 22:16:21,891 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 22:16:22,092 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 22:16:22,293 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 22:16:22,497 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 22:16:22,699 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 22:16:22,699 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 22:16:23,208 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 22:16:23,208 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61052) disconnected (session: 28e791a5-fa79-4e70-90d1-fd69a09e1ad9)
2025-08-05 22:16:23,208 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 22:16:23,208 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 28e791a5-fa79-4e70-90d1-fd69a09e1ad9
2025-08-05 22:16:23,209 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 22:16:41,352 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61058 (session: 6366cade-8435-447d-a440-f04ec8eccfda)
2025-08-05 22:16:41,369 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:16:41,369 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:16:41,369 - INFO - [__main__] 🔍 Service discovery request from session 6366cade-8435-447d-a440-f04ec8eccfda
2025-08-05 22:16:41,370 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754421401369

2025-08-05 22:16:41,370 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:16:51,248 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 22:16:51,249 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:16:51,249 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421411249
session_token: "sc_session_1754421401_6366cade"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:16:51,249 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:16:51,364 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 22:16:51,364 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:16:51,364 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421411364
session_token: "sc_session_1754421401_6366cade"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:16:51,364 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:16:51,763 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 6366cade-8435-447d-a440-f04ec8eccfda
2025-08-05 22:16:51,763 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 22:16:51,872 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 22:16:51,873 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 22:16:52,074 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 22:16:52,277 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 22:16:52,480 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 22:16:52,682 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 22:16:52,691 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 22:16:53,195 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 22:16:53,195 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61058) disconnected (session: 6366cade-8435-447d-a440-f04ec8eccfda)
2025-08-05 22:16:53,195 - INFO - [__main__] 📊 Session stats: 11.8s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-05 22:16:53,195 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 6366cade-8435-447d-a440-f04ec8eccfda
2025-08-05 22:16:53,195 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 22:17:01,461 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61070 (session: 9b6bad7a-e1c0-4d3f-90fe-44983226d25f)
2025-08-05 22:17:01,483 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:17:01,484 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:17:01,484 - INFO - [__main__] 🔍 Service discovery request from session 9b6bad7a-e1c0-4d3f-90fe-44983226d25f
2025-08-05 22:17:01,484 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754421421484

2025-08-05 22:17:01,485 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:17:11,245 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 22:17:11,246 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:17:11,246 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421431246
session_token: "sc_session_1754421421_9b6bad7a"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:17:11,246 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:17:11,362 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 22:17:11,363 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:17:11,363 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421431363
session_token: "sc_session_1754421421_9b6bad7a"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:17:11,363 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:17:11,479 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-05 22:17:11,480 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:17:11,480 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754421431480
session_token: "sc_session_1754421421_9b6bad7a"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:17:11,480 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:17:11,758 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 9b6bad7a-e1c0-4d3f-90fe-44983226d25f
2025-08-05 22:17:11,759 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 22:17:11,867 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 22:17:11,868 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 22:17:12,070 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 22:17:12,274 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 22:17:12,475 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 22:17:12,678 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 22:17:12,679 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 22:17:13,192 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 22:17:13,195 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61070) disconnected (session: 9b6bad7a-e1c0-4d3f-90fe-44983226d25f)
2025-08-05 22:17:13,195 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-05 22:17:13,196 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 9b6bad7a-e1c0-4d3f-90fe-44983226d25f
2025-08-05 22:17:13,196 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 22:25:22,996 - INFO - [__main__] 🔒 SSL certificate loaded successfully
2025-08-05 22:25:22,997 - INFO - [__main__] 🔒 SSL Diffusion Server started on 127.0.0.1:8001
2025-08-05 22:26:18,873 - INFO - [__main__] 🔒 SSL certificate loaded successfully
2025-08-05 22:26:18,873 - INFO - [__main__] 🔒 SSL Diffusion Server started on 127.0.0.1:8001
2025-08-05 22:27:36,119 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 22:27:36,119 - INFO - [__main__] ================================================================================
2025-08-05 22:27:36,119 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 22:27:36,120 - INFO - [__main__] ================================================================================
2025-08-05 22:27:36,120 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 22:27:36,120 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 22:27:36,120 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 22:27:36,120 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 22:27:36,120 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 22:27:36,120 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 22:27:36,120 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 22:27:36,120 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 22:27:36,121 - INFO - [__main__] 
2025-08-05 22:27:36,121 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 22:27:36,121 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 22:27:36,121 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 22:27:36,121 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 22:27:36,121 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 22:27:36,121 - INFO - [__main__] ================================================================================
2025-08-05 22:27:36,121 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 22:27:36,122 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 22:28:04,158 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61625 (session: 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56)
2025-08-05 22:28:04,180 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:28:04,180 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 22:28:04,180 - INFO - [__main__] 🔍 Service discovery request from session 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56
2025-08-05 22:28:04,180 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754422084180

2025-08-05 22:28:04,181 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:28:04,282 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 22:28:04,282 - INFO - [__main__] 🎮 Lobby destinations request from session 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56
2025-08-05 22:28:04,282 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754422084282

2025-08-05 22:28:04,283 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 22:28:04,448 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 22:28:04,448 - INFO - [__main__] 🌍 Region setup request from session 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56
2025-08-05 22:28:04,448 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 22:28:04,448 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 22:28:14,178 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 22:28:14,178 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:28:14,178 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754422094178
session_token: "sc_session_1754422084_39933580"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:28:14,179 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:28:14,684 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56
2025-08-05 22:28:14,684 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 22:28:14,792 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 22:28:14,792 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 22:28:14,993 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 22:28:15,195 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 22:28:15,399 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 22:28:15,601 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 22:28:15,602 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 22:28:16,116 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 22:28:16,117 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61625) disconnected (session: 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56)
2025-08-05 22:28:16,117 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 22:28:16,117 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 39933580-a9f9-4ba5-b2dc-a66d7dbe0e56
2025-08-05 22:28:16,117 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 22:28:34,268 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61636 (session: ed3c4e6d-8ea6-48d0-9033-0bc81afbb6d9)
2025-08-05 22:28:34,289 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:28:34,289 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-05 22:28:34,289 - INFO - [__main__] 🔍 Service discovery request from session ed3c4e6d-8ea6-48d0-9033-0bc81afbb6d9
2025-08-05 22:28:34,290 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 8443
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754422114290

2025-08-05 22:28:34,290 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:32:08,602 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-05 22:32:08,603 - INFO - [__main__] ================================================================================
2025-08-05 22:32:08,603 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-05 22:32:08,603 - INFO - [__main__] ================================================================================
2025-08-05 22:32:08,603 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-05 22:32:08,603 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-05 22:32:08,603 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-05 22:32:08,604 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-05 22:32:08,604 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-05 22:32:08,604 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-05 22:32:08,604 - INFO - [__main__]    * Region setup protobuf responses
2025-08-05 22:32:08,604 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-05 22:32:08,604 - INFO - [__main__] 
2025-08-05 22:32:08,604 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-05 22:32:08,604 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-05 22:32:08,604 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-05 22:32:08,605 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-05 22:32:08,605 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-05 22:32:08,605 - INFO - [__main__] ================================================================================
2025-08-05 22:32:08,605 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-05 22:32:08,605 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-05 22:32:33,316 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61705 (session: d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5)
2025-08-05 22:32:33,338 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:32:33,338 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:32:33,338 - INFO - [__main__] 🔍 Service discovery request from session d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5
2025-08-05 22:32:33,338 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754422353338

2025-08-05 22:32:33,339 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:32:33,441 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-05 22:32:33,441 - INFO - [__main__] 🎮 Lobby destinations request from session d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5
2025-08-05 22:32:33,441 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754422353441

2025-08-05 22:32:33,441 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-05 22:32:33,617 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-05 22:32:33,617 - INFO - [__main__] 🌍 Region setup request from session d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5
2025-08-05 22:32:33,617 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-05 22:32:33,617 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-05 22:32:43,335 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-05 22:32:43,335 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-05 22:32:43,335 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754422363335
session_token: "sc_session_1754422353_d3266f3e"
keep_alive: true
heartbeat_interval: 30

2025-08-05 22:32:43,335 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-05 22:32:43,846 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5
2025-08-05 22:32:43,846 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-05 22:32:43,955 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-05 22:32:43,955 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-05 22:32:44,157 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-05 22:32:44,359 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-05 22:32:44,561 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-05 22:32:44,763 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-05 22:32:44,763 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-05 22:32:45,278 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-05 22:32:45,278 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61705) disconnected (session: d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5)
2025-08-05 22:32:45,278 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-05 22:32:45,278 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session d3266f3e-8eff-4e86-8dc3-106dc2a3cdb5
2025-08-05 22:32:45,278 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-05 22:33:03,438 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:61715 (session: 3bfb84e3-21b0-439b-b785-6b80cd8f9e9b)
2025-08-05 22:33:03,460 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-05 22:33:03,460 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-05 22:33:03,460 - INFO - [__main__] 🔍 Service discovery request from session 3bfb84e3-21b0-439b-b785-6b80cd8f9e9b
2025-08-05 22:33:03,461 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754422383461

2025-08-05 22:33:03,461 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-05 22:33:33,584 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 61715) disconnected (session: 3bfb84e3-21b0-439b-b785-6b80cd8f9e9b)
2025-08-05 22:33:33,584 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-06 17:31:17,567 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 17:31:17,567 - INFO - [__main__] ================================================================================
2025-08-06 17:31:17,568 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 17:31:17,568 - INFO - [__main__] ================================================================================
2025-08-06 17:31:17,568 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 17:31:17,568 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 17:31:17,568 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 17:31:17,568 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 17:31:17,569 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 17:31:17,569 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 17:31:17,569 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 17:31:17,569 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 17:31:17,569 - INFO - [__main__] 
2025-08-06 17:31:17,569 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 17:31:17,569 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 17:31:17,569 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 17:31:17,569 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 17:31:17,569 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 17:31:17,569 - INFO - [__main__] ================================================================================
2025-08-06 17:31:17,569 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 17:31:17,570 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 17:32:17,468 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58147 (session: 79230df9-e6b9-4b99-a2fd-2c30b9ae5124)
2025-08-06 17:32:17,486 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 17:32:17,486 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 17:32:17,486 - INFO - [__main__] 🔍 Service discovery request from session 79230df9-e6b9-4b99-a2fd-2c30b9ae5124
2025-08-06 17:32:17,487 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754490737487

2025-08-06 17:32:17,488 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 17:32:17,629 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 17:32:17,629 - INFO - [__main__] 🎮 Lobby destinations request from session 79230df9-e6b9-4b99-a2fd-2c30b9ae5124
2025-08-06 17:32:17,629 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754490737629

2025-08-06 17:32:17,629 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-06 17:32:17,845 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 17:32:17,845 - INFO - [__main__] 🌍 Region setup request from session 79230df9-e6b9-4b99-a2fd-2c30b9ae5124
2025-08-06 17:32:17,845 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 17:32:17,845 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 17:32:27,489 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-06 17:32:27,490 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 17:32:27,490 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754490747490
session_token: "sc_session_1754490737_79230df9"
keep_alive: true
heartbeat_interval: 30

2025-08-06 17:32:27,490 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 17:32:28,003 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 79230df9-e6b9-4b99-a2fd-2c30b9ae5124
2025-08-06 17:32:28,020 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 17:32:28,126 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 17:32:28,126 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 17:32:28,328 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 17:32:28,531 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 17:32:28,731 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 17:32:28,933 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 17:32:28,934 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 17:32:29,445 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 17:32:29,448 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58147) disconnected (session: 79230df9-e6b9-4b99-a2fd-2c30b9ae5124)
2025-08-06 17:32:29,454 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-06 17:32:29,454 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 79230df9-e6b9-4b99-a2fd-2c30b9ae5124
2025-08-06 17:32:29,454 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 17:32:47,583 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58154 (session: 013faa8a-d030-41cf-b565-e6b9e19b1d50)
2025-08-06 17:32:47,605 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 17:32:47,605 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 17:32:47,605 - INFO - [__main__] 🔍 Service discovery request from session 013faa8a-d030-41cf-b565-e6b9e19b1d50
2025-08-06 17:32:47,605 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754490767605

2025-08-06 17:32:47,605 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 17:44:21,825 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 17:44:21,825 - INFO - [__main__] ================================================================================
2025-08-06 17:44:21,825 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 17:44:21,825 - INFO - [__main__] ================================================================================
2025-08-06 17:44:21,825 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 17:44:21,825 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 17:44:21,825 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 17:44:21,825 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 17:44:21,826 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 17:44:21,826 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 17:44:21,826 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 17:44:21,826 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 17:44:21,826 - INFO - [__main__] 
2025-08-06 17:44:21,826 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 17:44:21,826 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 17:44:21,826 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 17:44:21,826 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 17:44:21,826 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 17:44:21,826 - INFO - [__main__] ================================================================================
2025-08-06 17:44:21,827 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 17:44:21,827 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 17:47:41,737 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58238 (session: 36451751-c989-4544-9276-67477d920947)
2025-08-06 17:47:41,755 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 17:47:41,755 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 17:47:41,755 - INFO - [__main__] 🔍 Service discovery request from session 36451751-c989-4544-9276-67477d920947
2025-08-06 17:47:41,755 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8001
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754491661755

2025-08-06 17:47:41,755 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 17:47:41,871 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 17:47:41,871 - INFO - [__main__] 🎮 Lobby destinations request from session 36451751-c989-4544-9276-67477d920947
2025-08-06 17:47:41,871 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754491661871

2025-08-06 17:47:41,871 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-06 17:47:42,029 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 17:47:42,030 - INFO - [__main__] 🌍 Region setup request from session 36451751-c989-4544-9276-67477d920947
2025-08-06 17:47:42,030 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 17:47:42,030 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 17:58:08,049 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 17:58:08,049 - INFO - [__main__] ================================================================================
2025-08-06 17:58:08,049 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 17:58:08,049 - INFO - [__main__] ================================================================================
2025-08-06 17:58:08,049 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 17:58:08,049 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 17:58:08,049 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 17:58:08,050 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 17:58:08,050 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 17:58:08,050 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 17:58:08,050 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 17:58:08,050 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 17:58:08,050 - INFO - [__main__] 
2025-08-06 17:58:08,050 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 17:58:08,050 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 17:58:08,050 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 17:58:08,050 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 17:58:08,050 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 17:58:08,050 - INFO - [__main__] ================================================================================
2025-08-06 17:58:08,050 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 17:58:08,050 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 17:59:03,363 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 17:59:03,364 - INFO - [__main__] ================================================================================
2025-08-06 17:59:03,364 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 17:59:03,364 - INFO - [__main__] ================================================================================
2025-08-06 17:59:03,364 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 17:59:03,364 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 17:59:03,364 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 17:59:03,364 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 17:59:03,364 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 17:59:03,364 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 17:59:03,365 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 17:59:03,365 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 17:59:03,365 - INFO - [__main__] 
2025-08-06 17:59:03,365 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 17:59:03,365 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 17:59:03,365 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 17:59:03,365 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 17:59:03,365 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 17:59:03,365 - INFO - [__main__] ================================================================================
2025-08-06 17:59:03,365 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 17:59:03,366 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:00:47,202 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:00:47,203 - INFO - [__main__] ================================================================================
2025-08-06 18:00:47,203 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:00:47,203 - INFO - [__main__] ================================================================================
2025-08-06 18:00:47,203 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:00:47,203 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:00:47,203 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:00:47,203 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:00:47,203 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:00:47,203 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:00:47,204 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:00:47,204 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:00:47,204 - INFO - [__main__] 
2025-08-06 18:00:47,204 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:00:47,204 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 18:00:47,204 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:00:47,204 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:00:47,204 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:00:47,204 - INFO - [__main__] ================================================================================
2025-08-06 18:00:47,204 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:00:47,205 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 18:11:16,778 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:11:16,778 - INFO - [__main__] ================================================================================
2025-08-06 18:11:16,778 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:11:16,779 - INFO - [__main__] ================================================================================
2025-08-06 18:11:16,779 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:11:16,779 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:11:16,779 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:11:16,779 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:11:16,779 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:11:16,779 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:11:16,779 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:11:16,779 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:11:16,780 - INFO - [__main__] 
2025-08-06 18:11:16,780 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:11:16,780 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 18:11:16,780 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:11:16,780 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:11:16,780 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:11:16,780 - INFO - [__main__] ================================================================================
2025-08-06 18:11:16,780 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:11:16,781 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 18:13:04,281 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:13:04,281 - INFO - [__main__] ================================================================================
2025-08-06 18:13:04,281 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:13:04,281 - INFO - [__main__] ================================================================================
2025-08-06 18:13:04,281 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:13:04,281 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:13:04,281 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:13:04,282 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:13:04,282 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:13:04,282 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:13:04,282 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:13:04,282 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:13:04,282 - INFO - [__main__] 
2025-08-06 18:13:04,282 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:13:04,282 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 18:13:04,282 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:13:04,282 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:13:04,282 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:13:04,282 - INFO - [__main__] ================================================================================
2025-08-06 18:13:04,282 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:13:04,283 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 18:13:25,750 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58532 (session: 7bb61432-2ca1-4dcd-a9f7-d61f0c1d6599)
2025-08-06 18:13:25,750 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 18:13:38,739 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 58532) disconnected (session: 7bb61432-2ca1-4dcd-a9f7-d61f0c1d6599)
2025-08-06 18:13:38,739 - INFO - [__main__] 📊 Session stats: 13.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 18:13:38,791 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58535 (session: dc57426d-1420-4832-93cd-8633f636b999)
2025-08-06 18:13:38,812 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 18:13:53,272 - INFO - [__main__] 🔌 Client ('127.0.0.1', 58535) connection reset by peer
2025-08-06 18:13:53,273 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 58535) disconnected (session: dc57426d-1420-4832-93cd-8633f636b999)
2025-08-06 18:13:53,273 - INFO - [__main__] 📊 Session stats: 14.5s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 18:14:19,299 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:14:19,300 - INFO - [__main__] ================================================================================
2025-08-06 18:14:19,300 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:14:19,300 - INFO - [__main__] ================================================================================
2025-08-06 18:14:19,300 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:14:19,300 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:14:19,300 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:14:19,300 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:14:19,300 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:14:19,300 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:14:19,300 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:14:19,301 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:14:19,301 - INFO - [__main__] 
2025-08-06 18:14:19,301 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:14:19,301 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 18:14:19,301 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:14:19,301 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:14:19,301 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:14:19,301 - INFO - [__main__] ================================================================================
2025-08-06 18:14:19,301 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:14:19,302 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:14:32,208 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:14:32,208 - INFO - [__main__] ================================================================================
2025-08-06 18:14:32,208 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:14:32,208 - INFO - [__main__] ================================================================================
2025-08-06 18:14:32,208 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:14:32,208 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:14:32,209 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:14:32,209 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:14:32,209 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:14:32,209 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:14:32,209 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:14:32,209 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:14:32,209 - INFO - [__main__] 
2025-08-06 18:14:32,209 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:14:32,209 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 18:14:32,209 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:14:32,209 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:14:32,210 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:14:32,210 - INFO - [__main__] ================================================================================
2025-08-06 18:14:32,210 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:14:32,210 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:14:55,278 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58579 (session: b494c958-65df-4252-923d-02e3b5f72781)
2025-08-06 18:14:55,295 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 18:14:55,295 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 18:14:55,295 - INFO - [__main__] 🔍 Service discovery request from session b494c958-65df-4252-923d-02e3b5f72781
2025-08-06 18:14:55,295 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754493295295

2025-08-06 18:14:55,295 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 18:14:55,401 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 18:14:55,401 - INFO - [__main__] 🎮 Lobby destinations request from session b494c958-65df-4252-923d-02e3b5f72781
2025-08-06 18:14:55,401 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754493295401

2025-08-06 18:14:55,401 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-06 18:14:55,565 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 18:14:55,565 - INFO - [__main__] 🌍 Region setup request from session b494c958-65df-4252-923d-02e3b5f72781
2025-08-06 18:14:55,565 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 18:14:55,566 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 18:15:05,292 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-06 18:15:05,292 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 18:15:05,292 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754493305292
session_token: "sc_session_1754493295_b494c958"
keep_alive: true
heartbeat_interval: 30

2025-08-06 18:15:05,293 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 18:15:05,797 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session b494c958-65df-4252-923d-02e3b5f72781
2025-08-06 18:15:05,797 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 18:15:05,907 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 18:15:05,907 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 18:15:06,112 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 18:15:06,316 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 18:15:06,521 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 18:15:06,723 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 18:15:06,723 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 18:15:07,225 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 18:15:07,225 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 58579) disconnected (session: b494c958-65df-4252-923d-02e3b5f72781)
2025-08-06 18:15:07,226 - INFO - [__main__] 📊 Session stats: 11.9s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-06 18:15:07,226 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session b494c958-65df-4252-923d-02e3b5f72781
2025-08-06 18:15:07,226 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 18:15:25,389 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:58591 (session: 19af5972-abd1-41ee-acf8-a9e8f37ce7bb)
2025-08-06 18:15:25,405 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 18:15:25,405 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 18:15:25,405 - INFO - [__main__] 🔍 Service discovery request from session 19af5972-abd1-41ee-acf8-a9e8f37ce7bb
2025-08-06 18:15:25,405 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754493325405

2025-08-06 18:15:25,405 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 18:17:15,609 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:17:15,609 - INFO - [__main__] ================================================================================
2025-08-06 18:17:15,609 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:17:15,609 - INFO - [__main__] ================================================================================
2025-08-06 18:17:15,609 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:17:15,610 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:17:15,610 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:17:15,610 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:17:15,610 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:17:15,610 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:17:15,610 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:17:15,610 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:17:15,610 - INFO - [__main__] 
2025-08-06 18:17:15,610 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:17:15,610 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 18:17:15,611 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:17:15,611 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:17:15,611 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:17:15,611 - INFO - [__main__] ================================================================================
2025-08-06 18:17:15,611 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:17:15,612 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:19:44,739 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:19:44,740 - INFO - [__main__] ================================================================================
2025-08-06 18:19:44,740 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:19:44,740 - INFO - [__main__] ================================================================================
2025-08-06 18:19:44,740 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:19:44,740 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:19:44,740 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:19:44,740 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:19:44,740 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:19:44,740 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:19:44,740 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:19:44,740 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:19:44,741 - INFO - [__main__] 
2025-08-06 18:19:44,741 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:19:44,741 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 18:19:44,741 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:19:44,741 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:19:44,741 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:19:44,741 - INFO - [__main__] ================================================================================
2025-08-06 18:19:44,741 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:19:44,742 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:21:50,396 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:21:50,396 - INFO - [__main__] ================================================================================
2025-08-06 18:21:50,396 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:21:50,396 - INFO - [__main__] ================================================================================
2025-08-06 18:21:50,397 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:21:50,397 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:21:50,397 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:21:50,397 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:21:50,397 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:21:50,397 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:21:50,397 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:21:50,397 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:21:50,397 - INFO - [__main__] 
2025-08-06 18:21:50,398 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:21:50,398 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 18:21:50,398 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:21:50,398 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:21:50,398 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:21:50,398 - INFO - [__main__] ================================================================================
2025-08-06 18:21:50,398 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:21:50,398 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 18:23:38,175 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:23:38,175 - INFO - [__main__] ================================================================================
2025-08-06 18:23:38,175 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:23:38,175 - INFO - [__main__] ================================================================================
2025-08-06 18:23:38,175 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:23:38,175 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:23:38,175 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:23:38,175 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:23:38,175 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:23:38,175 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:23:38,176 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:23:38,176 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:23:38,176 - INFO - [__main__] 
2025-08-06 18:23:38,176 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:23:38,176 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 18:23:38,176 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:23:38,176 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:23:38,176 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:23:38,176 - INFO - [__main__] ================================================================================
2025-08-06 18:23:38,176 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:23:38,176 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 18:24:27,486 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 18:24:27,486 - INFO - [__main__] ================================================================================
2025-08-06 18:24:27,486 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 18:24:27,486 - INFO - [__main__] ================================================================================
2025-08-06 18:24:27,487 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 18:24:27,487 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 18:24:27,487 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 18:24:27,487 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 18:24:27,487 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 18:24:27,487 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 18:24:27,487 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 18:24:27,487 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 18:24:27,487 - INFO - [__main__] 
2025-08-06 18:24:27,487 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 18:24:27,487 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 18:24:27,487 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 18:24:27,487 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 18:24:27,487 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 18:24:27,487 - INFO - [__main__] ================================================================================
2025-08-06 18:24:27,487 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 18:24:27,488 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 18:25:30,863 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59068 (session: 4aca505e-13e3-4e7d-8b68-7cbdafacaf9d)
2025-08-06 18:25:30,864 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 18:25:40,573 - INFO - [__main__] 🔌 Client ('127.0.0.1', 59068) connection reset by peer
2025-08-06 18:25:40,573 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59068) disconnected (session: 4aca505e-13e3-4e7d-8b68-7cbdafacaf9d)
2025-08-06 18:25:40,573 - INFO - [__main__] 📊 Session stats: 9.7s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:20:33,016 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 19:20:33,017 - INFO - [__main__] ================================================================================
2025-08-06 19:20:33,017 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 19:20:33,017 - INFO - [__main__] ================================================================================
2025-08-06 19:20:33,017 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 19:20:33,017 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 19:20:33,017 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 19:20:33,017 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 19:20:33,017 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 19:20:33,017 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 19:20:33,018 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 19:20:33,018 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 19:20:33,018 - INFO - [__main__] 
2025-08-06 19:20:33,018 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 19:20:33,018 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 19:20:33,018 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 19:20:33,018 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 19:20:33,018 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 19:20:33,018 - INFO - [__main__] ================================================================================
2025-08-06 19:20:33,018 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 19:20:33,018 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 19:21:04,762 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59258 (session: 34d68328-1b72-47e5-b332-b9f4d124f053)
2025-08-06 19:21:04,762 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:21:17,764 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59258) disconnected (session: 34d68328-1b72-47e5-b332-b9f4d124f053)
2025-08-06 19:21:17,764 - INFO - [__main__] 📊 Session stats: 13.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:21:17,803 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59261 (session: e9724743-294a-498f-b55d-3dba0edca970)
2025-08-06 19:21:17,820 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:21:22,728 - INFO - [__main__] 🔌 Client ('127.0.0.1', 59261) connection reset by peer
2025-08-06 19:21:22,729 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59261) disconnected (session: e9724743-294a-498f-b55d-3dba0edca970)
2025-08-06 19:21:22,729 - INFO - [__main__] 📊 Session stats: 4.9s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:22:04,744 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 19:22:04,745 - INFO - [__main__] ================================================================================
2025-08-06 19:22:04,745 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 19:22:04,745 - INFO - [__main__] ================================================================================
2025-08-06 19:22:04,745 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 19:22:04,745 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 19:22:04,745 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 19:22:04,745 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 19:22:04,746 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 19:22:04,746 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 19:22:04,746 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 19:22:04,746 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 19:22:04,746 - INFO - [__main__] 
2025-08-06 19:22:04,746 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 19:22:04,746 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 19:22:04,746 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 19:22:04,746 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 19:22:04,746 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 19:22:04,746 - INFO - [__main__] ================================================================================
2025-08-06 19:22:04,746 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 19:22:04,747 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 19:22:25,982 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59294 (session: f489e81c-7622-4095-932b-f95ba59e1e9a)
2025-08-06 19:22:25,982 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:22:38,970 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59294) disconnected (session: f489e81c-7622-4095-932b-f95ba59e1e9a)
2025-08-06 19:22:38,970 - INFO - [__main__] 📊 Session stats: 13.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:22:39,020 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59297 (session: 975d61b3-3237-45e3-9c4a-cef07f7153c7)
2025-08-06 19:22:39,043 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:23:09,044 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59297) disconnected (session: 975d61b3-3237-45e3-9c4a-cef07f7153c7)
2025-08-06 19:23:09,044 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:23:09,101 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59303 (session: f6a71955-4353-45b5-9d39-e95905617a32)
2025-08-06 19:23:09,124 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:23:39,126 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59303) disconnected (session: f6a71955-4353-45b5-9d39-e95905617a32)
2025-08-06 19:23:39,126 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:23:39,183 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59307 (session: 8a2d139a-a168-4cbd-968c-15ccbc7d1053)
2025-08-06 19:23:39,200 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:24:09,200 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59307) disconnected (session: 8a2d139a-a168-4cbd-968c-15ccbc7d1053)
2025-08-06 19:24:09,201 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:24:09,250 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59311 (session: 95e8bcec-89a6-4ef9-b93f-8116776766ee)
2025-08-06 19:24:09,272 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:24:21,803 - INFO - [__main__] 🔌 Client ('127.0.0.1', 59311) connection reset by peer
2025-08-06 19:24:21,804 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59311) disconnected (session: 95e8bcec-89a6-4ef9-b93f-8116776766ee)
2025-08-06 19:24:21,804 - INFO - [__main__] 📊 Session stats: 12.6s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:32:06,271 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 19:32:06,271 - INFO - [__main__] ================================================================================
2025-08-06 19:32:06,271 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 19:32:06,271 - INFO - [__main__] ================================================================================
2025-08-06 19:32:06,271 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 19:32:06,271 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 19:32:06,271 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 19:32:06,271 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 19:32:06,272 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 19:32:06,272 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 19:32:06,272 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 19:32:06,272 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 19:32:06,272 - INFO - [__main__] 
2025-08-06 19:32:06,272 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 19:32:06,272 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8000) → Redirect to Services
2025-08-06 19:32:06,272 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 19:32:06,272 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 19:32:06,272 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 19:32:06,272 - INFO - [__main__] ================================================================================
2025-08-06 19:32:06,272 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 19:32:06,273 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8000 (No SSL - behind proxy)
2025-08-06 19:32:24,665 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59374 (session: 941ec85e-47de-4822-a6a7-7d3971686946)
2025-08-06 19:32:24,666 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:32:37,664 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59374) disconnected (session: 941ec85e-47de-4822-a6a7-7d3971686946)
2025-08-06 19:32:37,664 - INFO - [__main__] 📊 Session stats: 13.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:32:37,706 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59377 (session: 583fd9b5-4bb0-431d-a8f1-37dd618b0aa7)
2025-08-06 19:32:37,723 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:33:07,725 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59377) disconnected (session: 583fd9b5-4bb0-431d-a8f1-37dd618b0aa7)
2025-08-06 19:33:07,725 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:33:07,774 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59383 (session: 1802dc73-27c4-458d-be76-cf8268fbca78)
2025-08-06 19:33:07,797 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:33:37,800 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59383) disconnected (session: 1802dc73-27c4-458d-be76-cf8268fbca78)
2025-08-06 19:33:37,800 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:33:37,854 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59387 (session: fe2047c4-0116-4555-998e-d900a9d5cea9)
2025-08-06 19:33:37,877 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:34:07,878 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59387) disconnected (session: fe2047c4-0116-4555-998e-d900a9d5cea9)
2025-08-06 19:34:07,879 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:34:07,938 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59391 (session: 63cf0f4a-2e18-4db9-8b16-aab7439712ec)
2025-08-06 19:34:07,954 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:34:37,956 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59391) disconnected (session: 63cf0f4a-2e18-4db9-8b16-aab7439712ec)
2025-08-06 19:34:37,956 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:34:38,008 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59395 (session: 507774ce-f6ba-486b-b7ae-b35c723e8ebe)
2025-08-06 19:34:38,025 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:35:08,026 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59395) disconnected (session: 507774ce-f6ba-486b-b7ae-b35c723e8ebe)
2025-08-06 19:35:08,026 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:35:08,073 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59401 (session: 726d185f-3b13-4cc7-812e-18c8a01f3161)
2025-08-06 19:35:08,095 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:35:38,096 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59401) disconnected (session: 726d185f-3b13-4cc7-812e-18c8a01f3161)
2025-08-06 19:35:38,096 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:35:38,157 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59410 (session: 79173430-36e0-4962-8e98-fd850ba806e6)
2025-08-06 19:35:38,174 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:36:08,175 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59410) disconnected (session: 79173430-36e0-4962-8e98-fd850ba806e6)
2025-08-06 19:36:08,176 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:36:08,238 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59414 (session: f9e1b45b-05af-423b-be44-0c525675e7ed)
2025-08-06 19:36:08,254 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:36:38,255 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59414) disconnected (session: f9e1b45b-05af-423b-be44-0c525675e7ed)
2025-08-06 19:36:38,255 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:36:38,317 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59418 (session: eadc9357-7fff-4c78-bd9b-57a96e8e11d0)
2025-08-06 19:36:38,334 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:37:08,335 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59418) disconnected (session: eadc9357-7fff-4c78-bd9b-57a96e8e11d0)
2025-08-06 19:37:08,336 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:37:08,385 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59426 (session: cadf5128-c92a-43dd-bd77-4b0cbb78c9d8)
2025-08-06 19:37:08,408 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:37:38,408 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59426) disconnected (session: cadf5128-c92a-43dd-bd77-4b0cbb78c9d8)
2025-08-06 19:37:38,408 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:37:38,464 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59430 (session: 0c0d8bee-d913-436f-982a-6cdf4fc56227)
2025-08-06 19:37:38,487 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:38:08,489 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59430) disconnected (session: 0c0d8bee-d913-436f-982a-6cdf4fc56227)
2025-08-06 19:38:08,489 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:38:08,543 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59434 (session: e1ec5de1-eb55-4d74-9511-d4b8d847b90a)
2025-08-06 19:38:08,566 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:38:38,568 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59434) disconnected (session: e1ec5de1-eb55-4d74-9511-d4b8d847b90a)
2025-08-06 19:38:38,568 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:38:38,624 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59438 (session: eeaeb77b-61dc-42f5-89a1-5a2936d6bda6)
2025-08-06 19:38:38,647 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:38:39,675 - INFO - [__main__] 🔌 Client ('127.0.0.1', 59438) connection reset by peer
2025-08-06 19:38:39,675 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59438) disconnected (session: eeaeb77b-61dc-42f5-89a1-5a2936d6bda6)
2025-08-06 19:38:39,675 - INFO - [__main__] 📊 Session stats: 1.1s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:38:56,231 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59460 (session: 5ac4fb29-cef1-4540-aacb-e593ee89da5f)
2025-08-06 19:38:56,231 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:39:09,224 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59460) disconnected (session: 5ac4fb29-cef1-4540-aacb-e593ee89da5f)
2025-08-06 19:39:09,225 - INFO - [__main__] 📊 Session stats: 13.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:39:09,269 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59464 (session: 0a9ba836-4bf7-4193-963c-8e0356c9a677)
2025-08-06 19:39:09,293 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:39:39,294 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59464) disconnected (session: 0a9ba836-4bf7-4193-963c-8e0356c9a677)
2025-08-06 19:39:39,294 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:39:39,350 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59470 (session: b8629270-cad6-47fb-8e69-c8f1ba714461)
2025-08-06 19:39:39,373 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:40:09,374 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59470) disconnected (session: b8629270-cad6-47fb-8e69-c8f1ba714461)
2025-08-06 19:40:09,375 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:40:09,430 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59483 (session: 5b3e67b1-6d17-4714-8561-2f0ba0b84774)
2025-08-06 19:40:09,453 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:40:39,454 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59483) disconnected (session: 5b3e67b1-6d17-4714-8561-2f0ba0b84774)
2025-08-06 19:40:39,455 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:40:39,513 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59490 (session: 2d3aabad-23d6-4be2-be49-5bda044c76a9)
2025-08-06 19:40:39,530 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:41:09,531 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59490) disconnected (session: 2d3aabad-23d6-4be2-be49-5bda044c76a9)
2025-08-06 19:41:09,531 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:41:09,592 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59494 (session: ccf3eb99-8fbf-457a-9f44-974da0e61108)
2025-08-06 19:41:09,608 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:41:39,609 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59494) disconnected (session: ccf3eb99-8fbf-457a-9f44-974da0e61108)
2025-08-06 19:41:39,610 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:41:39,659 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59499 (session: 42c0a295-708f-484d-a2a9-5b695db86ae4)
2025-08-06 19:41:39,682 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:42:09,684 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 59499) disconnected (session: 42c0a295-708f-484d-a2a9-5b695db86ae4)
2025-08-06 19:42:09,684 - INFO - [__main__] 📊 Session stats: 30.0s duration, 1 messages, stage: initial, heartbeats: 0
2025-08-06 19:42:09,744 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59569 (session: bf54c524-aff4-4f99-8dda-d87afec393bc)
2025-08-06 19:42:09,761 - INFO - [__main__] 📨 Received binary message (135 bytes)
2025-08-06 19:42:53,081 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 19:42:53,081 - INFO - [__main__] ================================================================================
2025-08-06 19:42:53,081 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 19:42:53,082 - INFO - [__main__] ================================================================================
2025-08-06 19:42:53,082 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 19:42:53,082 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 19:42:53,082 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 19:42:53,082 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 19:42:53,082 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 19:42:53,082 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 19:42:53,082 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 19:42:53,082 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 19:42:53,082 - INFO - [__main__] 
2025-08-06 19:42:53,082 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 19:42:53,082 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 19:42:53,083 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 19:42:53,083 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 19:42:53,083 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 19:42:53,083 - INFO - [__main__] ================================================================================
2025-08-06 19:42:53,083 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 19:42:53,083 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 19:43:13,256 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59632 (session: 535c84cb-562a-4751-8790-f19584c8d558)
2025-08-06 19:43:13,279 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:43:13,279 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:43:13,279 - INFO - [__main__] 🔍 Service discovery request from session 535c84cb-562a-4751-8790-f19584c8d558
2025-08-06 19:43:13,280 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498593280

2025-08-06 19:43:13,280 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:43:13,401 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 19:43:13,402 - INFO - [__main__] 🎮 Lobby destinations request from session 535c84cb-562a-4751-8790-f19584c8d558
2025-08-06 19:43:13,402 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754498593402

2025-08-06 19:43:13,402 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-06 19:43:13,589 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 19:43:13,589 - INFO - [__main__] 🌍 Region setup request from session 535c84cb-562a-4751-8790-f19584c8d558
2025-08-06 19:43:13,589 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 19:43:13,589 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 19:43:23,283 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-06 19:43:23,284 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:43:23,284 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498603284
session_token: "sc_session_1754498593_535c84cb"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:43:23,284 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:43:23,786 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 535c84cb-562a-4751-8790-f19584c8d558
2025-08-06 19:43:23,787 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 19:43:23,888 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 19:43:23,888 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 19:43:24,096 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 19:43:24,464 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 19:43:25,008 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 19:43:25,209 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 19:43:25,210 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 19:43:25,712 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 19:43:25,712 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59632) disconnected (session: 535c84cb-562a-4751-8790-f19584c8d558)
2025-08-06 19:43:25,712 - INFO - [__main__] 📊 Session stats: 12.5s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-06 19:43:25,713 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 535c84cb-562a-4751-8790-f19584c8d558
2025-08-06 19:43:25,713 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 19:43:43,378 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59638 (session: b3d264af-1b30-4585-a318-5a5de376f139)
2025-08-06 19:43:43,404 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:43:43,404 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:43:43,404 - INFO - [__main__] 🔍 Service discovery request from session b3d264af-1b30-4585-a318-5a5de376f139
2025-08-06 19:43:43,404 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498623404

2025-08-06 19:43:43,404 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:43:53,274 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:43:53,274 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:43:53,274 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498633274
session_token: "sc_session_1754498623_b3d264af"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:43:53,275 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:43:53,393 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:43:53,393 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:43:53,393 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498633393
session_token: "sc_session_1754498623_b3d264af"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:43:53,393 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:43:53,776 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session b3d264af-1b30-4585-a318-5a5de376f139
2025-08-06 19:43:53,777 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 19:43:53,878 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 19:43:53,878 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 19:43:54,080 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 19:43:54,282 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 19:43:54,484 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 19:43:54,685 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 19:43:54,686 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 19:43:55,186 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 19:43:55,187 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59638) disconnected (session: b3d264af-1b30-4585-a318-5a5de376f139)
2025-08-06 19:43:55,187 - INFO - [__main__] 📊 Session stats: 11.8s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-06 19:43:55,187 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session b3d264af-1b30-4585-a318-5a5de376f139
2025-08-06 19:43:55,187 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 19:44:03,498 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59642 (session: 00e7ee63-64aa-41ee-b3a5-afb732b932d3)
2025-08-06 19:44:03,514 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:44:03,514 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:44:03,514 - INFO - [__main__] 🔍 Service discovery request from session 00e7ee63-64aa-41ee-b3a5-afb732b932d3
2025-08-06 19:44:03,514 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498643514

2025-08-06 19:44:03,515 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:44:13,274 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:13,274 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:13,275 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498653275
session_token: "sc_session_1754498643_00e7ee63"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:13,275 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:13,393 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:13,394 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:13,394 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498653394
session_token: "sc_session_1754498643_00e7ee63"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:13,394 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:13,513 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:13,514 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:13,514 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498653514
session_token: "sc_session_1754498643_00e7ee63"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:13,514 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:13,777 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 00e7ee63-64aa-41ee-b3a5-afb732b932d3
2025-08-06 19:44:13,778 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 19:44:13,879 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 19:44:13,879 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 19:44:14,081 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 19:44:14,283 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 19:44:14,485 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 19:44:14,686 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 19:44:14,686 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 19:44:15,187 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 19:44:15,187 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59642) disconnected (session: 00e7ee63-64aa-41ee-b3a5-afb732b932d3)
2025-08-06 19:44:15,188 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-06 19:44:15,188 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 00e7ee63-64aa-41ee-b3a5-afb732b932d3
2025-08-06 19:44:15,188 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 19:44:23,488 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59647 (session: bbcfb956-d502-4aa5-ab67-dc9e6cf5ecb5)
2025-08-06 19:44:23,505 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:44:23,505 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:44:23,505 - INFO - [__main__] 🔍 Service discovery request from session bbcfb956-d502-4aa5-ab67-dc9e6cf5ecb5
2025-08-06 19:44:23,505 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498663505

2025-08-06 19:44:23,505 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:44:33,274 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:33,274 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:33,275 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498673275
session_token: "sc_session_1754498663_bbcfb956"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:33,275 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:33,390 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:33,390 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:33,390 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498673390
session_token: "sc_session_1754498663_bbcfb956"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:33,390 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:33,503 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:33,504 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:33,504 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498673504
session_token: "sc_session_1754498663_bbcfb956"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:33,504 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:33,606 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:33,606 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:33,606 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498673606
session_token: "sc_session_1754498663_bbcfb956"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:33,607 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:33,776 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session bbcfb956-d502-4aa5-ab67-dc9e6cf5ecb5
2025-08-06 19:44:33,777 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 19:44:33,879 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 19:44:33,879 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 19:44:34,080 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 19:44:34,282 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 19:44:34,483 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 19:44:34,684 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 19:44:34,685 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 19:44:35,186 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 19:44:35,186 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59647) disconnected (session: bbcfb956-d502-4aa5-ab67-dc9e6cf5ecb5)
2025-08-06 19:44:35,187 - INFO - [__main__] 📊 Session stats: 11.7s duration, 5 messages, stage: heartbeat_active, heartbeats: 4
2025-08-06 19:44:35,187 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session bbcfb956-d502-4aa5-ab67-dc9e6cf5ecb5
2025-08-06 19:44:35,187 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 19:44:43,486 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59653 (session: c24781b6-0cfa-4e8e-bc78-a2db12d8ba3c)
2025-08-06 19:44:43,507 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:44:43,508 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:44:43,508 - INFO - [__main__] 🔍 Service discovery request from session c24781b6-0cfa-4e8e-bc78-a2db12d8ba3c
2025-08-06 19:44:43,508 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498683508

2025-08-06 19:44:43,508 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:44:53,277 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:53,277 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:53,277 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498693277
session_token: "sc_session_1754498683_c24781b6"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:53,277 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:53,391 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:53,392 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:53,392 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498693392
session_token: "sc_session_1754498683_c24781b6"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:53,392 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:53,502 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 19:44:53,503 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 19:44:53,503 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498693503
session_token: "sc_session_1754498683_c24781b6"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:53,503 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:53,605 - INFO - [__main__] 📨 Received binary message (102 bytes)
2025-08-06 19:44:53,608 - WARNING - [__main__] ⚠️ Failed to parse heartbeat protobuf: Error parsing message with type 'star_network.HeartbeatRequest'
2025-08-06 19:44:53,608 - INFO - [__main__] 📊 Raw heartbeat data: 2b000000efbeadde0a09686561727462656174121c0a1a0804100018ffffffffffffffffff0120ffffffffffffffffff0118002b000000efbeadde0a09686561727462656174121c0a1a0804100018ffffffffffffffffff0120ffffffffffffffffff011800
2025-08-06 19:44:53,609 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754498693609
session_token: "sc_session_1754498683_c24781b6"
keep_alive: true
heartbeat_interval: 30

2025-08-06 19:44:53,609 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 19:44:53,779 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session c24781b6-0cfa-4e8e-bc78-a2db12d8ba3c
2025-08-06 19:44:53,780 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 19:44:53,882 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 19:44:53,882 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 19:44:54,085 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 19:44:54,286 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 19:44:54,486 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 19:44:54,688 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 19:44:54,688 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 19:44:55,189 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 19:44:55,189 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59653) disconnected (session: c24781b6-0cfa-4e8e-bc78-a2db12d8ba3c)
2025-08-06 19:44:55,189 - INFO - [__main__] 📊 Session stats: 11.7s duration, 5 messages, stage: heartbeat_active, heartbeats: 4
2025-08-06 19:44:55,189 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session c24781b6-0cfa-4e8e-bc78-a2db12d8ba3c
2025-08-06 19:44:55,189 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 19:45:03,486 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59663 (session: 4b3f9295-a42b-42a0-8512-65401027075c)
2025-08-06 19:45:03,509 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 19:45:03,509 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-06 19:45:03,509 - INFO - [__main__] 🔍 Service discovery request from session 4b3f9295-a42b-42a0-8512-65401027075c
2025-08-06 19:45:03,509 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754498703509

2025-08-06 19:45:03,509 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 19:45:33,612 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59663) disconnected (session: 4b3f9295-a42b-42a0-8512-65401027075c)
2025-08-06 19:45:33,612 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-06 20:16:40,609 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:16:40,610 - INFO - [__main__] ================================================================================
2025-08-06 20:16:40,610 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:16:40,610 - INFO - [__main__] ================================================================================
2025-08-06 20:16:40,610 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:16:40,610 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:16:40,610 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:16:40,610 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:16:40,610 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:16:40,611 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:16:40,611 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:16:40,611 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:16:40,611 - INFO - [__main__] 
2025-08-06 20:16:40,611 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:16:40,611 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:16:40,611 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:16:40,611 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:16:40,611 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:16:40,611 - INFO - [__main__] ================================================================================
2025-08-06 20:16:40,611 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:16:40,612 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 20:17:10,546 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59848 (session: 7884558f-dfd9-45f0-b34d-985f23975e9e)
2025-08-06 20:17:10,567 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:17:10,568 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:17:10,568 - INFO - [__main__] 🔍 Service discovery request from session 7884558f-dfd9-45f0-b34d-985f23975e9e
2025-08-06 20:17:10,568 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754500630568

2025-08-06 20:17:10,568 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:17:10,670 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 20:17:10,670 - INFO - [__main__] 🎮 Lobby destinations request from session 7884558f-dfd9-45f0-b34d-985f23975e9e
2025-08-06 20:17:10,670 - INFO - [__main__] 📤 Sending lobby destinations response: destinations {
  destination_id: "test_lobby_001"
  name: "Test Universe"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754500630670

2025-08-06 20:17:10,670 - INFO - [__main__] 📤 Sent response to client (100 bytes)
2025-08-06 20:17:10,819 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 20:17:10,820 - INFO - [__main__] 🌍 Region setup request from session 7884558f-dfd9-45f0-b34d-985f23975e9e
2025-08-06 20:17:10,820 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 20:17:10,820 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 20:17:20,567 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-06 20:17:20,567 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:17:20,567 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500640567
session_token: "sc_session_1754500630_7884558f"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:17:20,568 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:17:21,073 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 7884558f-dfd9-45f0-b34d-985f23975e9e
2025-08-06 20:17:21,074 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:17:21,183 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:17:21,183 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:17:21,398 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:17:21,602 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 20:17:21,807 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 20:17:22,009 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 20:17:22,010 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:17:22,524 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:17:22,524 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59848) disconnected (session: 7884558f-dfd9-45f0-b34d-985f23975e9e)
2025-08-06 20:17:22,525 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-06 20:17:22,525 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 7884558f-dfd9-45f0-b34d-985f23975e9e
2025-08-06 20:17:22,525 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:17:40,668 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59860 (session: b16c0ec1-d65a-478b-ab44-747549b2f56d)
2025-08-06 20:17:40,684 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:17:40,684 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:17:40,684 - INFO - [__main__] 🔍 Service discovery request from session b16c0ec1-d65a-478b-ab44-747549b2f56d
2025-08-06 20:17:40,684 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754500660684

2025-08-06 20:17:40,685 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:17:50,562 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:17:50,562 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:17:50,563 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500670563
session_token: "sc_session_1754500660_b16c0ec1"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:17:50,563 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:17:50,680 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:17:50,681 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:17:50,681 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500670681
session_token: "sc_session_1754500660_b16c0ec1"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:17:50,681 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:17:51,071 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session b16c0ec1-d65a-478b-ab44-747549b2f56d
2025-08-06 20:17:51,072 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:17:51,180 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:17:51,181 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:17:51,383 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:17:51,588 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 20:17:51,792 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 20:17:51,994 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 20:17:51,995 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:17:52,508 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:17:52,508 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59860) disconnected (session: b16c0ec1-d65a-478b-ab44-747549b2f56d)
2025-08-06 20:17:52,508 - INFO - [__main__] 📊 Session stats: 11.8s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-06 20:17:52,509 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session b16c0ec1-d65a-478b-ab44-747549b2f56d
2025-08-06 20:17:52,509 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:18:00,778 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59865 (session: 4767e06d-6a93-479f-ae50-f93cb5d931d7)
2025-08-06 20:18:00,793 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:18:00,793 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:18:00,794 - INFO - [__main__] 🔍 Service discovery request from session 4767e06d-6a93-479f-ae50-f93cb5d931d7
2025-08-06 20:18:00,794 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754500680794

2025-08-06 20:18:00,794 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:18:10,566 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:10,566 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:10,566 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500690566
session_token: "sc_session_1754500680_4767e06d"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:10,566 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:10,678 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:10,679 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:10,679 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500690679
session_token: "sc_session_1754500680_4767e06d"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:10,679 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:10,793 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:10,793 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:10,793 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500690793
session_token: "sc_session_1754500680_4767e06d"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:10,793 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:11,075 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 4767e06d-6a93-479f-ae50-f93cb5d931d7
2025-08-06 20:18:11,076 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:18:11,184 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:18:11,185 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:18:11,387 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:18:11,588 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 20:18:11,789 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 20:18:11,990 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 20:18:11,991 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:18:12,502 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:18:12,503 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59865) disconnected (session: 4767e06d-6a93-479f-ae50-f93cb5d931d7)
2025-08-06 20:18:12,503 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-06 20:18:12,503 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 4767e06d-6a93-479f-ae50-f93cb5d931d7
2025-08-06 20:18:12,503 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:18:20,775 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59869 (session: 2e9ea742-3370-4119-9b44-4b815d248163)
2025-08-06 20:18:20,796 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:18:20,796 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:18:20,797 - INFO - [__main__] 🔍 Service discovery request from session 2e9ea742-3370-4119-9b44-4b815d248163
2025-08-06 20:18:20,797 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754500700797

2025-08-06 20:18:20,797 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:18:30,563 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:30,563 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:30,563 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500710563
session_token: "sc_session_1754500700_2e9ea742"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:30,564 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:30,682 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:30,683 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:30,683 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500710683
session_token: "sc_session_1754500700_2e9ea742"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:30,683 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:30,789 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:30,789 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:30,789 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500710789
session_token: "sc_session_1754500700_2e9ea742"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:30,789 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:30,899 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:18:30,899 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:18:30,900 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754500710900
session_token: "sc_session_1754500700_2e9ea742"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:18:30,900 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:18:31,071 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 2e9ea742-3370-4119-9b44-4b815d248163
2025-08-06 20:18:31,072 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:18:31,180 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:18:31,180 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:18:31,381 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:18:31,586 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage (wrapped)
2025-08-06 20:18:31,788 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (wrapped)
2025-08-06 20:18:31,991 - INFO - [__main__] 📤 Sent LoginCompletedMessage with gRPC server endpoint (127.0.0.1:5678)
2025-08-06 20:18:31,992 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:18:32,505 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:18:32,505 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59869) disconnected (session: 2e9ea742-3370-4119-9b44-4b815d248163)
2025-08-06 20:18:32,506 - INFO - [__main__] 📊 Session stats: 11.7s duration, 5 messages, stage: heartbeat_active, heartbeats: 4
2025-08-06 20:18:32,506 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 2e9ea742-3370-4119-9b44-4b815d248163
2025-08-06 20:18:32,506 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:18:40,776 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:59873 (session: a7ea6846-9772-40a4-80f1-be02ca1a3c23)
2025-08-06 20:18:40,798 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:18:40,798 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:18:40,798 - INFO - [__main__] 🔍 Service discovery request from session a7ea6846-9772-40a4-80f1-be02ca1a3c23
2025-08-06 20:18:40,798 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754500720798

2025-08-06 20:18:40,799 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:19:10,921 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 59873) disconnected (session: a7ea6846-9772-40a4-80f1-be02ca1a3c23)
2025-08-06 20:19:10,921 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-06 20:28:39,856 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:28:39,857 - INFO - [__main__] ================================================================================
2025-08-06 20:28:39,857 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:28:39,857 - INFO - [__main__] ================================================================================
2025-08-06 20:28:39,857 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:28:39,857 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:28:39,857 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:28:39,857 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:28:39,857 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:28:39,857 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:28:39,857 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:28:39,857 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:28:39,857 - INFO - [__main__] 
2025-08-06 20:28:39,857 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:28:39,857 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:28:39,858 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:28:39,858 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:28:39,858 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:28:39,858 - INFO - [__main__] ================================================================================
2025-08-06 20:28:39,858 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:28:39,858 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 20:30:42,188 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:30:42,188 - INFO - [__main__] ================================================================================
2025-08-06 20:30:42,189 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:30:42,189 - INFO - [__main__] ================================================================================
2025-08-06 20:30:42,189 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:30:42,189 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:30:42,189 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:30:42,189 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:30:42,189 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:30:42,189 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:30:42,189 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:30:42,190 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:30:42,190 - INFO - [__main__] 
2025-08-06 20:30:42,190 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:30:42,190 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:30:42,190 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:30:42,190 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:30:42,190 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:30:42,190 - INFO - [__main__] ================================================================================
2025-08-06 20:30:42,190 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:30:42,190 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-06 20:30:42,191 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-06 20:30:42,191 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-06 20:30:55,063 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:30:55,063 - INFO - [__main__] ================================================================================
2025-08-06 20:30:55,064 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:30:55,064 - INFO - [__main__] ================================================================================
2025-08-06 20:30:55,064 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:30:55,064 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:30:55,064 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:30:55,064 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:30:55,064 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:30:55,064 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:30:55,065 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:30:55,065 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:30:55,065 - INFO - [__main__] 
2025-08-06 20:30:55,065 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:30:55,065 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:30:55,065 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:30:55,065 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:30:55,065 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:30:55,065 - INFO - [__main__] ================================================================================
2025-08-06 20:30:55,066 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:30:55,066 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 20:31:17,590 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:60084 (session: 6689bbc1-b4ab-4357-85e2-8d29abd81f41)
2025-08-06 20:31:17,607 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:31:17,607 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:31:17,607 - INFO - [__main__] 🔍 Service discovery request from session 6689bbc1-b4ab-4357-85e2-8d29abd81f41
2025-08-06 20:31:17,607 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754501477607

2025-08-06 20:31:17,607 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:31:17,722 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-06 20:31:17,722 - INFO - [__main__] 🎮 Lobby destinations request from session 6689bbc1-b4ab-4357-85e2-8d29abd81f41
2025-08-06 20:31:17,722 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754501477722

2025-08-06 20:31:17,722 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-06 20:31:17,860 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-06 20:31:17,860 - INFO - [__main__] 🌍 Region setup request from session 6689bbc1-b4ab-4357-85e2-8d29abd81f41
2025-08-06 20:31:17,860 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-06 20:31:17,860 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-06 20:31:27,600 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-06 20:31:27,600 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:31:27,600 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754501487600
session_token: "sc_session_1754501477_6689bbc1"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:31:27,600 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:31:28,115 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 6689bbc1-b4ab-4357-85e2-8d29abd81f41
2025-08-06 20:31:28,116 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-06 20:31:28,116 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:31:28,223 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:31:28,223 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:31:28,425 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:31:28,628 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-06 20:31:28,831 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-06 20:31:29,033 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-06 20:31:29,033 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:31:29,548 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:31:29,548 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 60084) disconnected (session: 6689bbc1-b4ab-4357-85e2-8d29abd81f41)
2025-08-06 20:31:29,548 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-06 20:31:29,548 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 6689bbc1-b4ab-4357-85e2-8d29abd81f41
2025-08-06 20:31:29,549 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:31:47,696 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:60092 (session: ac816240-736c-4cd1-98ae-8c2bff3b37d2)
2025-08-06 20:31:47,720 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-06 20:31:47,720 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-06 20:31:47,720 - INFO - [__main__] 🔍 Service discovery request from session ac816240-736c-4cd1-98ae-8c2bff3b37d2
2025-08-06 20:31:47,720 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754501507720

2025-08-06 20:31:47,721 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-06 20:31:57,603 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:31:57,603 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:31:57,603 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754501517603
session_token: "sc_session_1754501507_ac816240"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:31:57,603 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:31:57,716 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-06 20:31:57,716 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-06 20:31:57,716 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754501517716
session_token: "sc_session_1754501507_ac816240"
keep_alive: true
heartbeat_interval: 30

2025-08-06 20:31:57,716 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-06 20:31:58,112 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session ac816240-736c-4cd1-98ae-8c2bff3b37d2
2025-08-06 20:31:58,112 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-06 20:31:58,112 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-06 20:31:58,221 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-06 20:31:58,222 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-06 20:31:58,423 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-06 20:31:58,626 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-06 20:31:58,828 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-06 20:31:59,028 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-06 20:31:59,029 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-06 20:31:59,540 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-06 20:31:59,541 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 60092) disconnected (session: ac816240-736c-4cd1-98ae-8c2bff3b37d2)
2025-08-06 20:31:59,541 - INFO - [__main__] 📊 Session stats: 11.8s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-06 20:31:59,541 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session ac816240-736c-4cd1-98ae-8c2bff3b37d2
2025-08-06 20:31:59,541 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-06 20:33:35,823 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:33:35,823 - INFO - [__main__] ================================================================================
2025-08-06 20:33:35,823 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:33:35,824 - INFO - [__main__] ================================================================================
2025-08-06 20:33:35,824 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:33:35,824 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:33:35,824 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:33:35,824 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:33:35,824 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:33:35,824 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:33:35,824 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:33:35,824 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:33:35,824 - INFO - [__main__] 
2025-08-06 20:33:35,824 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:33:35,825 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:33:35,825 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:33:35,825 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:33:35,825 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:33:35,825 - INFO - [__main__] ================================================================================
2025-08-06 20:33:35,825 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:33:35,826 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 20:36:36,485 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:36:36,486 - INFO - [__main__] ================================================================================
2025-08-06 20:36:36,486 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:36:36,486 - INFO - [__main__] ================================================================================
2025-08-06 20:36:36,486 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:36:36,486 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:36:36,486 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:36:36,486 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:36:36,487 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:36:36,487 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:36:36,487 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:36:36,487 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:36:36,487 - INFO - [__main__] 
2025-08-06 20:36:36,487 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:36:36,487 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:36:36,487 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:36:36,487 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:36:36,488 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:36:36,488 - INFO - [__main__] ================================================================================
2025-08-06 20:36:36,488 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:36:36,488 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-06 20:37:21,712 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-06 20:37:21,713 - INFO - [__main__] ================================================================================
2025-08-06 20:37:21,713 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-06 20:37:21,713 - INFO - [__main__] ================================================================================
2025-08-06 20:37:21,713 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-06 20:37:21,713 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-06 20:37:21,713 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-06 20:37:21,713 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-06 20:37:21,713 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-06 20:37:21,713 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-06 20:37:21,714 - INFO - [__main__]    * Region setup protobuf responses
2025-08-06 20:37:21,714 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-06 20:37:21,714 - INFO - [__main__] 
2025-08-06 20:37:21,714 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-06 20:37:21,714 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-06 20:37:21,714 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-06 20:37:21,714 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-06 20:37:21,714 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-06 20:37:21,714 - INFO - [__main__] ================================================================================
2025-08-06 20:37:21,715 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-06 20:37:21,715 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 01:50:37,983 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 01:50:37,983 - INFO - [__main__] ================================================================================
2025-08-07 01:50:37,983 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 01:50:37,983 - INFO - [__main__] ================================================================================
2025-08-07 01:50:37,983 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 01:50:37,983 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 01:50:37,983 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 01:50:37,984 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 01:50:37,984 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 01:50:37,984 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 01:50:37,984 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 01:50:37,984 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 01:50:37,984 - INFO - [__main__] 
2025-08-07 01:50:37,984 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 01:50:37,984 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 01:50:37,984 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 01:50:37,984 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 01:50:37,984 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 01:50:37,985 - INFO - [__main__] ================================================================================
2025-08-07 01:50:37,985 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 01:50:37,986 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 01:53:47,961 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 01:53:47,961 - INFO - [__main__] ================================================================================
2025-08-07 01:53:47,961 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 01:53:47,962 - INFO - [__main__] ================================================================================
2025-08-07 01:53:47,962 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 01:53:47,962 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 01:53:47,962 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 01:53:47,962 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 01:53:47,962 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 01:53:47,962 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 01:53:47,962 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 01:53:47,962 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 01:53:47,962 - INFO - [__main__] 
2025-08-07 01:53:47,962 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 01:53:47,963 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 01:53:47,963 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 01:53:47,963 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 01:53:47,963 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 01:53:47,963 - INFO - [__main__] ================================================================================
2025-08-07 01:53:47,963 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 01:53:47,963 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 01:56:46,512 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 01:56:46,512 - INFO - [__main__] ================================================================================
2025-08-07 01:56:46,512 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 01:56:46,512 - INFO - [__main__] ================================================================================
2025-08-07 01:56:46,513 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 01:56:46,513 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 01:56:46,513 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 01:56:46,513 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 01:56:46,513 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 01:56:46,513 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 01:56:46,513 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 01:56:46,513 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 01:56:46,513 - INFO - [__main__] 
2025-08-07 01:56:46,513 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 01:56:46,513 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 01:56:46,514 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 01:56:46,514 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 01:56:46,514 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 01:56:46,514 - INFO - [__main__] ================================================================================
2025-08-07 01:56:46,514 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 01:56:46,514 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 02:12:15,791 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 02:12:15,792 - INFO - [__main__] ================================================================================
2025-08-07 02:12:15,792 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 02:12:15,792 - INFO - [__main__] ================================================================================
2025-08-07 02:12:15,792 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 02:12:15,792 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 02:12:15,792 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 02:12:15,793 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 02:12:15,793 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 02:12:15,793 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 02:12:15,793 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 02:12:15,793 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 02:12:15,793 - INFO - [__main__] 
2025-08-07 02:12:15,793 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 02:12:15,793 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 02:12:15,793 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 02:12:15,794 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 02:12:15,794 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 02:12:15,794 - INFO - [__main__] ================================================================================
2025-08-07 02:12:15,794 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 02:12:15,794 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 02:15:02,699 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 02:15:02,699 - INFO - [__main__] ================================================================================
2025-08-07 02:15:02,700 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 02:15:02,700 - INFO - [__main__] ================================================================================
2025-08-07 02:15:02,700 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 02:15:02,700 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 02:15:02,700 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 02:15:02,701 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 02:15:02,701 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 02:15:02,701 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 02:15:02,701 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 02:15:02,701 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 02:15:02,701 - INFO - [__main__] 
2025-08-07 02:15:02,701 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 02:15:02,701 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 02:15:02,701 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 02:15:02,701 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 02:15:02,701 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 02:15:02,701 - INFO - [__main__] ================================================================================
2025-08-07 02:15:02,701 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 02:15:02,702 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 02:15:48,188 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62587 (session: 9db0906d-7ea6-43e0-b0d9-68fb9bac0106)
2025-08-07 02:15:48,203 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:15:48,203 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 02:15:48,203 - INFO - [__main__] 🔍 Service discovery request from session 9db0906d-7ea6-43e0-b0d9-68fb9bac0106
2025-08-07 02:15:48,204 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754522148203

2025-08-07 02:15:48,204 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:15:48,334 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 02:15:48,335 - INFO - [__main__] 🎮 Lobby destinations request from session 9db0906d-7ea6-43e0-b0d9-68fb9bac0106
2025-08-07 02:15:48,335 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754522148335

2025-08-07 02:15:48,335 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 02:15:48,567 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 02:15:48,567 - INFO - [__main__] 🌍 Region setup request from session 9db0906d-7ea6-43e0-b0d9-68fb9bac0106
2025-08-07 02:15:48,568 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 02:15:48,568 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 02:15:58,208 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 02:15:58,208 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:15:58,208 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754522158208
session_token: "sc_session_1754522148_9db0906d"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:15:58,209 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:15:58,712 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 9db0906d-7ea6-43e0-b0d9-68fb9bac0106
2025-08-07 02:15:58,712 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 02:15:58,712 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 02:15:58,821 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 02:15:58,821 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 02:15:59,024 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 02:15:59,225 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 02:15:59,427 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 02:15:59,632 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 02:15:59,632 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 02:16:00,134 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 02:16:00,135 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62587) disconnected (session: 9db0906d-7ea6-43e0-b0d9-68fb9bac0106)
2025-08-07 02:16:00,135 - INFO - [__main__] 📊 Session stats: 11.9s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 02:16:00,135 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 9db0906d-7ea6-43e0-b0d9-68fb9bac0106
2025-08-07 02:16:00,135 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 02:30:40,492 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 02:30:40,492 - INFO - [__main__] ================================================================================
2025-08-07 02:30:40,492 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 02:30:40,493 - INFO - [__main__] ================================================================================
2025-08-07 02:30:40,493 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 02:30:40,493 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 02:30:40,493 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 02:30:40,493 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 02:30:40,493 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 02:30:40,493 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 02:30:40,493 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 02:30:40,493 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 02:30:40,493 - INFO - [__main__] 
2025-08-07 02:30:40,493 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 02:30:40,494 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 02:30:40,494 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 02:30:40,494 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 02:30:40,494 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 02:30:40,494 - INFO - [__main__] ================================================================================
2025-08-07 02:30:40,494 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 02:30:40,494 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 02:31:14,392 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62931 (session: c53beb90-6e01-4976-a0ef-c55e609a3793)
2025-08-07 02:31:14,417 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:31:14,417 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 02:31:14,417 - INFO - [__main__] 🔍 Service discovery request from session c53beb90-6e01-4976-a0ef-c55e609a3793
2025-08-07 02:31:14,417 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523074417

2025-08-07 02:31:14,418 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:31:14,521 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 02:31:14,521 - INFO - [__main__] 🎮 Lobby destinations request from session c53beb90-6e01-4976-a0ef-c55e609a3793
2025-08-07 02:31:14,521 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754523074521

2025-08-07 02:31:14,521 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 02:31:14,742 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 02:31:14,742 - INFO - [__main__] 🌍 Region setup request from session c53beb90-6e01-4976-a0ef-c55e609a3793
2025-08-07 02:31:14,743 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 02:31:14,743 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 02:31:24,422 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 02:31:24,422 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:31:24,423 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523084423
session_token: "sc_session_1754523074_c53beb90"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:31:24,423 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:31:24,931 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session c53beb90-6e01-4976-a0ef-c55e609a3793
2025-08-07 02:31:24,932 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 02:31:24,932 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 02:31:25,041 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 02:31:25,042 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 02:31:25,244 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 02:31:25,447 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 02:31:25,649 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 02:31:25,850 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 02:31:25,851 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 02:31:26,364 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 02:31:26,364 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62931) disconnected (session: c53beb90-6e01-4976-a0ef-c55e609a3793)
2025-08-07 02:31:26,364 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 02:31:26,365 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session c53beb90-6e01-4976-a0ef-c55e609a3793
2025-08-07 02:31:26,365 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 02:31:44,516 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62940 (session: ef5bd516-43b0-4435-8f73-7cc99805da4b)
2025-08-07 02:31:44,534 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:31:44,534 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 02:31:44,534 - INFO - [__main__] 🔍 Service discovery request from session ef5bd516-43b0-4435-8f73-7cc99805da4b
2025-08-07 02:31:44,534 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523104534

2025-08-07 02:31:44,535 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:31:54,408 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:31:54,409 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:31:54,409 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523114409
session_token: "sc_session_1754523104_ef5bd516"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:31:54,409 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:31:54,531 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:31:54,531 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:31:54,532 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523114532
session_token: "sc_session_1754523104_ef5bd516"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:31:54,532 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:31:54,923 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session ef5bd516-43b0-4435-8f73-7cc99805da4b
2025-08-07 02:31:54,923 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 02:31:54,924 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 02:31:55,032 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 02:31:55,032 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 02:31:55,233 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 02:31:55,437 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 02:31:55,652 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 02:31:55,855 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 02:31:55,855 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 02:31:56,366 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 02:31:56,367 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62940) disconnected (session: ef5bd516-43b0-4435-8f73-7cc99805da4b)
2025-08-07 02:31:56,367 - INFO - [__main__] 📊 Session stats: 11.9s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 02:31:56,367 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session ef5bd516-43b0-4435-8f73-7cc99805da4b
2025-08-07 02:31:56,367 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 02:32:04,625 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62948 (session: 08e85e88-1087-4dfe-8eb0-c9e67a22c231)
2025-08-07 02:32:04,643 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:32:04,643 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 02:32:04,643 - INFO - [__main__] 🔍 Service discovery request from session 08e85e88-1087-4dfe-8eb0-c9e67a22c231
2025-08-07 02:32:04,643 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523124643

2025-08-07 02:32:04,643 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:32:14,408 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:14,409 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:14,409 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523134409
session_token: "sc_session_1754523124_08e85e88"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:14,409 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:14,528 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:14,528 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:14,528 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523134528
session_token: "sc_session_1754523124_08e85e88"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:14,528 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:14,642 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:14,642 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:14,642 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523134642
session_token: "sc_session_1754523124_08e85e88"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:14,642 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:14,918 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 08e85e88-1087-4dfe-8eb0-c9e67a22c231
2025-08-07 02:32:14,918 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 02:32:14,918 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 02:32:15,026 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 02:32:15,026 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 02:32:15,228 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 02:32:15,431 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 02:32:15,634 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 02:32:15,836 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 02:32:15,837 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 02:32:16,349 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 02:32:16,349 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62948) disconnected (session: 08e85e88-1087-4dfe-8eb0-c9e67a22c231)
2025-08-07 02:32:16,349 - INFO - [__main__] 📊 Session stats: 11.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-07 02:32:16,349 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 08e85e88-1087-4dfe-8eb0-c9e67a22c231
2025-08-07 02:32:16,349 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 02:32:24,621 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62952 (session: c331e2ac-4e2d-417c-8b0a-293a6ad971ab)
2025-08-07 02:32:24,643 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:32:24,643 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 02:32:24,643 - INFO - [__main__] 🔍 Service discovery request from session c331e2ac-4e2d-417c-8b0a-293a6ad971ab
2025-08-07 02:32:24,643 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523144643

2025-08-07 02:32:24,644 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:32:34,413 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:34,413 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:34,414 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523154414
session_token: "sc_session_1754523144_c331e2ac"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:34,414 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:34,526 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:34,526 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:34,526 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523154526
session_token: "sc_session_1754523144_c331e2ac"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:34,527 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:34,639 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:34,639 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:34,639 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523154639
session_token: "sc_session_1754523144_c331e2ac"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:34,640 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:34,743 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 02:32:34,743 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 02:32:34,743 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754523154743
session_token: "sc_session_1754523144_c331e2ac"
keep_alive: true
heartbeat_interval: 30

2025-08-07 02:32:34,743 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 02:32:34,929 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session c331e2ac-4e2d-417c-8b0a-293a6ad971ab
2025-08-07 02:32:34,929 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 02:32:34,930 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 02:32:35,037 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 02:32:35,037 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 02:32:35,240 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 02:32:35,441 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 02:32:35,657 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 02:32:35,858 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 02:32:35,859 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 02:32:36,371 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 02:32:36,372 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62952) disconnected (session: c331e2ac-4e2d-417c-8b0a-293a6ad971ab)
2025-08-07 02:32:36,372 - INFO - [__main__] 📊 Session stats: 11.8s duration, 5 messages, stage: heartbeat_active, heartbeats: 4
2025-08-07 02:32:36,372 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session c331e2ac-4e2d-417c-8b0a-293a6ad971ab
2025-08-07 02:32:36,372 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 02:32:44,624 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:62962 (session: 0f1c28ca-90ca-4d92-814c-cbc06ba367bd)
2025-08-07 02:32:44,641 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:32:44,641 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 02:32:44,641 - INFO - [__main__] 🔍 Service discovery request from session 0f1c28ca-90ca-4d92-814c-cbc06ba367bd
2025-08-07 02:32:44,641 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523164641

2025-08-07 02:32:44,641 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:33:14,761 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 62962) disconnected (session: 0f1c28ca-90ca-4d92-814c-cbc06ba367bd)
2025-08-07 02:33:14,761 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-07 02:45:46,663 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:63243 (session: 4bacaa18-e231-4e69-b875-0590000eacd6)
2025-08-07 02:45:46,679 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 02:45:46,680 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 02:45:46,680 - INFO - [__main__] 🔍 Service discovery request from session 4bacaa18-e231-4e69-b875-0590000eacd6
2025-08-07 02:45:46,680 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754523946680

2025-08-07 02:45:46,680 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 02:45:46,805 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 02:45:46,805 - INFO - [__main__] 🎮 Lobby destinations request from session 4bacaa18-e231-4e69-b875-0590000eacd6
2025-08-07 02:45:46,805 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754523946805

2025-08-07 02:45:46,806 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 02:45:46,995 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 02:45:46,995 - INFO - [__main__] 🌍 Region setup request from session 4bacaa18-e231-4e69-b875-0590000eacd6
2025-08-07 02:45:46,995 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 02:45:46,995 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 02:46:17,115 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 63243) disconnected (session: 4bacaa18-e231-4e69-b875-0590000eacd6)
2025-08-07 02:46:17,115 - INFO - [__main__] 📊 Session stats: 30.5s duration, 3 messages, stage: region_setup, heartbeats: 0
2025-08-07 21:19:57,809 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 21:19:57,809 - INFO - [__main__] ================================================================================
2025-08-07 21:19:57,809 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 21:19:57,810 - INFO - [__main__] ================================================================================
2025-08-07 21:19:57,810 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 21:19:57,810 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 21:19:57,810 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 21:19:57,810 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 21:19:57,810 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 21:19:57,810 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 21:19:57,810 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 21:19:57,810 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 21:19:57,810 - INFO - [__main__] 
2025-08-07 21:19:57,811 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 21:19:57,811 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 21:19:57,811 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 21:19:57,811 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 21:19:57,811 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 21:19:57,811 - INFO - [__main__] ================================================================================
2025-08-07 21:19:57,811 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 21:19:57,812 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 21:20:48,618 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:65437 (session: b0c4bf63-382c-4e96-8226-0f0e9dfeb47e)
2025-08-07 21:20:48,639 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:20:48,640 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 21:20:48,640 - INFO - [__main__] 🔍 Service discovery request from session b0c4bf63-382c-4e96-8226-0f0e9dfeb47e
2025-08-07 21:20:48,641 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754590848640

2025-08-07 21:20:48,641 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:20:48,759 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 21:20:48,759 - INFO - [__main__] 🎮 Lobby destinations request from session b0c4bf63-382c-4e96-8226-0f0e9dfeb47e
2025-08-07 21:20:48,759 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754590848759

2025-08-07 21:20:48,759 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 21:20:49,048 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 21:20:49,048 - INFO - [__main__] 🌍 Region setup request from session b0c4bf63-382c-4e96-8226-0f0e9dfeb47e
2025-08-07 21:20:49,049 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 21:20:49,049 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 21:20:58,644 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 21:20:58,644 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 21:20:58,644 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754590858644
session_token: "sc_session_1754590848_b0c4bf63"
keep_alive: true
heartbeat_interval: 30

2025-08-07 21:20:58,644 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 21:20:59,147 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session b0c4bf63-382c-4e96-8226-0f0e9dfeb47e
2025-08-07 21:20:59,147 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 21:20:59,147 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 21:20:59,248 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 21:20:59,248 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 21:20:59,450 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 21:20:59,652 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 21:20:59,854 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 21:21:00,056 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 21:21:00,056 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 21:21:00,557 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 21:21:00,559 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 65437) disconnected (session: b0c4bf63-382c-4e96-8226-0f0e9dfeb47e)
2025-08-07 21:21:00,565 - INFO - [__main__] 📊 Session stats: 11.9s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 21:21:00,565 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session b0c4bf63-382c-4e96-8226-0f0e9dfeb47e
2025-08-07 21:21:00,565 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 21:23:15,825 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:65468 (session: 1f2d4b32-fab2-43bc-a070-665b9cc4a02e)
2025-08-07 21:23:15,825 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 65468) disconnected (session: 1f2d4b32-fab2-43bc-a070-665b9cc4a02e)
2025-08-07 21:23:15,825 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:23:16,943 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:65473 (session: 214af3f4-302f-4a5f-bc5c-653a51f6c7a8)
2025-08-07 21:23:16,943 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 65473) disconnected (session: 214af3f4-302f-4a5f-bc5c-653a51f6c7a8)
2025-08-07 21:23:16,943 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:23:37,006 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:65486 (session: aad09d34-db06-46e2-a2b4-5b4b96edb1a3)
2025-08-07 21:23:37,006 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 65486) disconnected (session: aad09d34-db06-46e2-a2b4-5b4b96edb1a3)
2025-08-07 21:23:37,007 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:23:37,979 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:65491 (session: ee74ae66-26a9-44a0-89a1-bfcae67d3818)
2025-08-07 21:23:37,979 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 65491) disconnected (session: ee74ae66-26a9-44a0-89a1-bfcae67d3818)
2025-08-07 21:23:37,980 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:26:23,538 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49234 (session: 03eb9f08-4a88-4b95-a761-8183db65972a)
2025-08-07 21:26:23,555 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:26:23,555 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 21:26:23,555 - INFO - [__main__] 🔍 Service discovery request from session 03eb9f08-4a88-4b95-a761-8183db65972a
2025-08-07 21:26:23,556 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754591183556

2025-08-07 21:26:23,556 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:26:23,689 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 21:26:23,689 - INFO - [__main__] 🎮 Lobby destinations request from session 03eb9f08-4a88-4b95-a761-8183db65972a
2025-08-07 21:26:23,689 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754591183689

2025-08-07 21:26:23,689 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 21:26:23,905 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 21:26:23,905 - INFO - [__main__] 🌍 Region setup request from session 03eb9f08-4a88-4b95-a761-8183db65972a
2025-08-07 21:26:23,905 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 21:26:23,905 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 21:26:54,008 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49234) disconnected (session: 03eb9f08-4a88-4b95-a761-8183db65972a)
2025-08-07 21:26:54,008 - INFO - [__main__] 📊 Session stats: 30.5s duration, 3 messages, stage: region_setup, heartbeats: 0
2025-08-07 21:31:20,869 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49430 (session: 7cda8d55-cf35-4124-8ece-5e8f2a52c423)
2025-08-07 21:31:20,887 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:31:20,887 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 21:31:20,887 - INFO - [__main__] 🔍 Service discovery request from session 7cda8d55-cf35-4124-8ece-5e8f2a52c423
2025-08-07 21:31:20,887 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754591480887

2025-08-07 21:31:20,887 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:31:21,018 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 21:31:21,018 - INFO - [__main__] 🎮 Lobby destinations request from session 7cda8d55-cf35-4124-8ece-5e8f2a52c423
2025-08-07 21:31:21,018 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754591481018

2025-08-07 21:31:21,018 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 21:31:21,212 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 21:31:21,212 - INFO - [__main__] 🌍 Region setup request from session 7cda8d55-cf35-4124-8ece-5e8f2a52c423
2025-08-07 21:31:21,213 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 21:31:21,213 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 21:31:51,315 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49430) disconnected (session: 7cda8d55-cf35-4124-8ece-5e8f2a52c423)
2025-08-07 21:31:51,315 - INFO - [__main__] 📊 Session stats: 30.4s duration, 3 messages, stage: region_setup, heartbeats: 0
2025-08-07 21:37:09,406 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49535 (session: 43357e57-d388-4d8d-82c0-6e092aaede23)
2025-08-07 21:37:09,406 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 49535) disconnected (session: 43357e57-d388-4d8d-82c0-6e092aaede23)
2025-08-07 21:37:09,406 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:37:10,393 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49540 (session: 80e1fc57-4cff-4fa8-8b6b-5212cf1ce4e7)
2025-08-07 21:37:10,393 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 49540) disconnected (session: 80e1fc57-4cff-4fa8-8b6b-5212cf1ce4e7)
2025-08-07 21:37:10,393 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 21:38:23,509 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49600 (session: be601447-060f-468a-9057-f0cc30ce2839)
2025-08-07 21:38:23,530 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:38:23,530 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 21:38:23,530 - INFO - [__main__] 🔍 Service discovery request from session be601447-060f-468a-9057-f0cc30ce2839
2025-08-07 21:38:23,530 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754591903530

2025-08-07 21:38:23,531 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:38:23,645 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 21:38:23,646 - INFO - [__main__] 🎮 Lobby destinations request from session be601447-060f-468a-9057-f0cc30ce2839
2025-08-07 21:38:23,646 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754591903646

2025-08-07 21:38:23,646 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 21:38:23,823 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 21:38:23,823 - INFO - [__main__] 🌍 Region setup request from session be601447-060f-468a-9057-f0cc30ce2839
2025-08-07 21:38:23,823 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 21:38:23,823 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 21:38:33,526 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 21:38:33,527 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 21:38:33,527 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754591913527
session_token: "sc_session_1754591903_be601447"
keep_alive: true
heartbeat_interval: 30

2025-08-07 21:38:33,527 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 21:38:34,035 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session be601447-060f-468a-9057-f0cc30ce2839
2025-08-07 21:38:34,035 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 21:38:34,036 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 21:38:34,145 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 21:38:34,145 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 21:38:34,346 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 21:38:34,549 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 21:38:34,751 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 21:38:34,955 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 21:38:34,955 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 21:38:35,470 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 21:38:35,470 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49600) disconnected (session: be601447-060f-468a-9057-f0cc30ce2839)
2025-08-07 21:38:35,470 - INFO - [__main__] 📊 Session stats: 12.0s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 21:38:35,471 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session be601447-060f-468a-9057-f0cc30ce2839
2025-08-07 21:38:35,471 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 21:38:53,631 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49610 (session: 00d5553c-0f38-4667-b2ca-8e1623753ebf)
2025-08-07 21:38:53,647 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:38:53,647 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 21:38:53,647 - INFO - [__main__] 🔍 Service discovery request from session 00d5553c-0f38-4667-b2ca-8e1623753ebf
2025-08-07 21:38:53,648 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754591933648

2025-08-07 21:38:53,648 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:39:03,525 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 21:39:03,525 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 21:39:03,525 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754591943525
session_token: "sc_session_1754591933_00d5553c"
keep_alive: true
heartbeat_interval: 30

2025-08-07 21:39:03,526 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 21:39:03,646 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 21:39:03,646 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 21:39:03,646 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754591943646
session_token: "sc_session_1754591933_00d5553c"
keep_alive: true
heartbeat_interval: 30

2025-08-07 21:39:03,647 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 21:39:04,035 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 00d5553c-0f38-4667-b2ca-8e1623753ebf
2025-08-07 21:39:04,035 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 21:39:04,036 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 21:39:04,144 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 21:39:04,144 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 21:39:04,347 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 21:39:04,550 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 21:39:04,755 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe (wrapped)
2025-08-07 21:39:04,957 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 21:39:04,957 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 21:39:05,471 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 21:39:05,471 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49610) disconnected (session: 00d5553c-0f38-4667-b2ca-8e1623753ebf)
2025-08-07 21:39:05,472 - INFO - [__main__] 📊 Session stats: 11.8s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 21:39:05,472 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 00d5553c-0f38-4667-b2ca-8e1623753ebf
2025-08-07 21:39:05,472 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 21:39:13,741 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49615 (session: 63e01b5b-53e5-4c30-919d-c4a8a28b03f5)
2025-08-07 21:39:13,757 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 21:39:13,757 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 21:39:13,757 - INFO - [__main__] 🔍 Service discovery request from session 63e01b5b-53e5-4c30-919d-c4a8a28b03f5
2025-08-07 21:39:13,758 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754591953758

2025-08-07 21:39:13,758 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 21:39:43,874 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49615) disconnected (session: 63e01b5b-53e5-4c30-919d-c4a8a28b03f5)
2025-08-07 21:39:43,874 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-07 22:01:27,536 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:01:27,537 - INFO - [__main__] ================================================================================
2025-08-07 22:01:27,537 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:01:27,537 - INFO - [__main__] ================================================================================
2025-08-07 22:01:27,537 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:01:27,537 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:01:27,537 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:01:27,537 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:01:27,537 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:01:27,537 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:01:27,537 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:01:27,537 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:01:27,537 - INFO - [__main__] 
2025-08-07 22:01:27,537 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:01:27,538 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:01:27,538 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:01:27,538 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:01:27,538 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:01:27,538 - INFO - [__main__] ================================================================================
2025-08-07 22:01:27,538 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:01:27,538 - ERROR - [__main__] ❌ Server error: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8001): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
2025-08-07 22:01:27,538 - INFO - [__main__] 🛑 Stopping Diffusion Server...
2025-08-07 22:01:27,538 - INFO - [__main__] ✅ Diffusion Server stopped
2025-08-07 22:03:24,323 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:03:24,324 - INFO - [__main__] ================================================================================
2025-08-07 22:03:24,324 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:03:24,324 - INFO - [__main__] ================================================================================
2025-08-07 22:03:24,324 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:03:24,324 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:03:24,324 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:03:24,324 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:03:24,324 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:03:24,324 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:03:24,324 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:03:24,324 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:03:24,324 - INFO - [__main__] 
2025-08-07 22:03:24,325 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:03:24,325 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:03:24,325 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:03:24,325 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:03:24,325 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:03:24,325 - INFO - [__main__] ================================================================================
2025-08-07 22:03:24,325 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:03:24,325 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:03:32,203 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49834 (session: c1ba4698-8d8d-40c0-8d91-ed8736f8e4ae)
2025-08-07 22:03:32,204 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 49834) disconnected (session: c1ba4698-8d8d-40c0-8d91-ed8736f8e4ae)
2025-08-07 22:03:32,204 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:04:05,751 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49864 (session: 9f73c659-b60d-42e7-8f2b-617fcf17149d)
2025-08-07 22:04:05,769 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:04:05,769 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:04:05,769 - INFO - [__main__] 🔍 Service discovery request from session 9f73c659-b60d-42e7-8f2b-617fcf17149d
2025-08-07 22:04:05,769 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754593445769

2025-08-07 22:04:05,770 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:04:05,872 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:04:05,872 - INFO - [__main__] 🎮 Lobby destinations request from session 9f73c659-b60d-42e7-8f2b-617fcf17149d
2025-08-07 22:04:05,872 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754593445872

2025-08-07 22:04:05,872 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:04:06,092 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:04:06,092 - INFO - [__main__] 🌍 Region setup request from session 9f73c659-b60d-42e7-8f2b-617fcf17149d
2025-08-07 22:04:06,092 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:04:06,092 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:04:15,774 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:04:15,774 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:04:15,774 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754593455774
session_token: "sc_session_1754593445_9f73c659"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:04:15,774 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:04:16,290 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 9f73c659-b60d-42e7-8f2b-617fcf17149d
2025-08-07 22:04:16,291 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:04:16,291 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:04:16,399 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:04:16,399 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:04:16,602 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:04:16,808 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:04:17,009 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (EXECUTING) - Received an entitlement status update message with values: command id reconcile_cmd_1754593457 - details Synchronizing character data for Stanton_ArcCorp_Area18 in persistent_universe - account urn urn:rsi:account:1000001 - player urn urn:rsi:player:char_testpilot_001 - status RECONCILE_ACCOUNT_STATUS_EXECUTING - phase RECONCILE_ACCOUNT_PHASE_PLATFORM (wrapped)
2025-08-07 22:04:17,010 - INFO - [__main__] 🔍 Message format matches reverse engineered function FUN_140ba5af0
2025-08-07 22:04:17,324 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Received an entitlement status update message with values: command id reconcile_cmd_1754593457 - details Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe - account urn urn:rsi:account:1000001 - player urn urn:rsi:player:char_testpilot_001 - status RECONCILE_ACCOUNT_STATUS_COMPLETE - phase RECONCILE_ACCOUNT_PHASE_PLATFORM (wrapped)
2025-08-07 22:04:17,324 - INFO - [__main__] 🔍 Message format matches reverse engineered function FUN_140ba5af0
2025-08-07 22:04:17,540 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:04:17,540 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:04:18,054 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:04:18,054 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49864) disconnected (session: 9f73c659-b60d-42e7-8f2b-617fcf17149d)
2025-08-07 22:04:18,054 - INFO - [__main__] 📊 Session stats: 12.3s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 22:04:18,055 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 9f73c659-b60d-42e7-8f2b-617fcf17149d
2025-08-07 22:04:18,055 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:04:35,862 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49872 (session: c53b776f-661d-4c3a-936f-3ed8f99d1c75)
2025-08-07 22:04:35,879 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:04:35,879 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:04:35,879 - INFO - [__main__] 🔍 Service discovery request from session c53b776f-661d-4c3a-936f-3ed8f99d1c75
2025-08-07 22:04:35,879 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754593475879

2025-08-07 22:04:35,879 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:04:45,763 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:04:45,763 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:04:45,763 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754593485763
session_token: "sc_session_1754593475_c53b776f"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:04:45,764 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:04:45,876 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:04:45,876 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:04:45,877 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754593485877
session_token: "sc_session_1754593475_c53b776f"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:04:45,877 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:04:46,273 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session c53b776f-661d-4c3a-936f-3ed8f99d1c75
2025-08-07 22:04:46,273 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:04:46,273 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:04:46,380 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:04:46,381 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:04:46,583 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:04:46,785 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:04:46,987 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage (EXECUTING) - Received an entitlement status update message with values: command id reconcile_cmd_1754593486 - details Synchronizing character data for Stanton_ArcCorp_Area18 in persistent_universe - account urn urn:rsi:account:1000001 - player urn urn:rsi:player:char_testpilot_001 - status RECONCILE_ACCOUNT_STATUS_EXECUTING - phase RECONCILE_ACCOUNT_PHASE_PLATFORM (wrapped)
2025-08-07 22:04:46,988 - INFO - [__main__] 🔍 Message format matches reverse engineered function FUN_140ba5af0
2025-08-07 22:04:47,297 - INFO - [__main__] 📤 Sent ReconcileAccountUpdateNotificationMessage - Received an entitlement status update message with values: command id reconcile_cmd_1754593487 - details Character data synchronized for Stanton_ArcCorp_Area18 in persistent_universe - account urn urn:rsi:account:1000001 - player urn urn:rsi:player:char_testpilot_001 - status RECONCILE_ACCOUNT_STATUS_COMPLETE - phase RECONCILE_ACCOUNT_PHASE_PLATFORM (wrapped)
2025-08-07 22:04:47,298 - INFO - [__main__] 🔍 Message format matches reverse engineered function FUN_140ba5af0
2025-08-07 22:04:47,501 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:04:47,501 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:04:48,016 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:04:48,017 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 49872) disconnected (session: c53b776f-661d-4c3a-936f-3ed8f99d1c75)
2025-08-07 22:04:48,017 - INFO - [__main__] 📊 Session stats: 12.2s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 22:04:48,017 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session c53b776f-661d-4c3a-936f-3ed8f99d1c75
2025-08-07 22:04:48,017 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:14:08,271 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:14:08,271 - INFO - [__main__] ================================================================================
2025-08-07 22:14:08,271 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:14:08,271 - INFO - [__main__] ================================================================================
2025-08-07 22:14:08,271 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:14:08,271 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:14:08,271 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:14:08,271 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:14:08,271 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:14:08,271 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:14:08,272 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:14:08,272 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:14:08,272 - INFO - [__main__] 
2025-08-07 22:14:08,272 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:14:08,272 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:14:08,272 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:14:08,272 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:14:08,272 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:14:08,272 - INFO - [__main__] ================================================================================
2025-08-07 22:14:08,272 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:14:08,272 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:14:14,073 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:49987 (session: 8736bb8f-7035-4c49-ae66-0b2a46445141)
2025-08-07 22:14:14,073 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 49987) disconnected (session: 8736bb8f-7035-4c49-ae66-0b2a46445141)
2025-08-07 22:14:14,073 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:14:52,422 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50021 (session: 5b344554-47cf-415b-9a10-2ffa9901e97c)
2025-08-07 22:14:52,439 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:14:52,439 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:14:52,439 - INFO - [__main__] 🔍 Service discovery request from session 5b344554-47cf-415b-9a10-2ffa9901e97c
2025-08-07 22:14:52,439 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594092439

2025-08-07 22:14:52,440 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:14:52,553 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:14:52,553 - INFO - [__main__] 🎮 Lobby destinations request from session 5b344554-47cf-415b-9a10-2ffa9901e97c
2025-08-07 22:14:52,553 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754594092553

2025-08-07 22:14:52,553 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:14:52,709 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:14:52,709 - INFO - [__main__] 🌍 Region setup request from session 5b344554-47cf-415b-9a10-2ffa9901e97c
2025-08-07 22:14:52,709 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:14:52,709 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:15:02,438 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:15:02,438 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:15:02,439 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594102439
session_token: "sc_session_1754594092_5b344554"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:15:02,439 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:15:02,950 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 5b344554-47cf-415b-9a10-2ffa9901e97c
2025-08-07 22:15:02,950 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:15:02,950 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:15:03,059 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:15:03,059 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:15:03,262 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:15:03,463 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:15:03,665 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:15:03,665 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:15:03,774 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:15:03,884 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:15:03,991 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:15:04,100 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:15:04,209 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:15:04,320 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:15:04,431 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:15:04,633 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:15:04,633 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:15:04,633 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:15:05,144 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:15:05,144 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50021) disconnected (session: 5b344554-47cf-415b-9a10-2ffa9901e97c)
2025-08-07 22:15:05,144 - INFO - [__main__] 📊 Session stats: 12.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 22:15:05,145 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 5b344554-47cf-415b-9a10-2ffa9901e97c
2025-08-07 22:15:05,145 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:15:22,531 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50026 (session: 3c172fb6-e974-4f9f-911e-7a3009482ddd)
2025-08-07 22:15:22,548 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:15:22,548 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:15:22,548 - INFO - [__main__] 🔍 Service discovery request from session 3c172fb6-e974-4f9f-911e-7a3009482ddd
2025-08-07 22:15:22,548 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594122548

2025-08-07 22:15:22,549 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:15:52,669 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50026) disconnected (session: 3c172fb6-e974-4f9f-911e-7a3009482ddd)
2025-08-07 22:15:52,669 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-07 22:24:05,964 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:24:05,965 - INFO - [__main__] ================================================================================
2025-08-07 22:24:05,965 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:24:05,965 - INFO - [__main__] ================================================================================
2025-08-07 22:24:05,965 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:24:05,965 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:24:05,965 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:24:05,965 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:24:05,965 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:24:05,965 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:24:05,965 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:24:05,966 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:24:05,966 - INFO - [__main__] 
2025-08-07 22:24:05,966 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:24:05,966 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:24:05,966 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:24:05,966 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:24:05,966 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:24:05,966 - INFO - [__main__] ================================================================================
2025-08-07 22:24:05,966 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:24:05,966 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:24:12,046 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50119 (session: 524040f2-3a8a-47fe-ba00-7f68e28212cf)
2025-08-07 22:24:12,047 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50119) disconnected (session: 524040f2-3a8a-47fe-ba00-7f68e28212cf)
2025-08-07 22:24:12,047 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:24:31,980 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50150 (session: cce7cfca-eb76-47d9-a6f1-84c7c66ced58)
2025-08-07 22:24:31,997 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:24:31,997 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:24:31,997 - INFO - [__main__] 🔍 Service discovery request from session cce7cfca-eb76-47d9-a6f1-84c7c66ced58
2025-08-07 22:24:31,997 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594671997

2025-08-07 22:24:31,997 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:24:32,104 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:24:32,104 - INFO - [__main__] 🎮 Lobby destinations request from session cce7cfca-eb76-47d9-a6f1-84c7c66ced58
2025-08-07 22:24:32,104 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754594672104

2025-08-07 22:24:32,104 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:24:32,284 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:24:32,284 - INFO - [__main__] 🌍 Region setup request from session cce7cfca-eb76-47d9-a6f1-84c7c66ced58
2025-08-07 22:24:32,285 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:24:32,285 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:24:41,995 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:24:41,995 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:24:41,995 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594681995
session_token: "sc_session_1754594671_cce7cfca"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:24:41,995 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:24:42,507 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session cce7cfca-eb76-47d9-a6f1-84c7c66ced58
2025-08-07 22:24:42,508 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:24:42,508 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:24:42,618 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:24:42,619 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:24:42,821 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:24:43,023 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:24:43,223 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:24:43,224 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:24:43,331 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:24:43,439 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:24:43,546 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:24:43,655 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:24:43,762 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:24:43,872 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:24:43,981 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:24:44,184 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:24:44,184 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:24:44,184 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:24:44,696 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:24:44,697 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50150) disconnected (session: cce7cfca-eb76-47d9-a6f1-84c7c66ced58)
2025-08-07 22:24:44,697 - INFO - [__main__] 📊 Session stats: 12.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 22:24:44,697 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session cce7cfca-eb76-47d9-a6f1-84c7c66ced58
2025-08-07 22:24:44,697 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:25:02,089 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50158 (session: 7b395d48-1557-4a83-9a92-ea4b79ab7672)
2025-08-07 22:25:02,106 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:25:02,106 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:25:02,106 - INFO - [__main__] 🔍 Service discovery request from session 7b395d48-1557-4a83-9a92-ea4b79ab7672
2025-08-07 22:25:02,106 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594702106

2025-08-07 22:25:02,107 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:25:11,993 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:11,993 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:11,993 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594711993
session_token: "sc_session_1754594702_7b395d48"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:11,993 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:12,104 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:12,104 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:12,104 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594712104
session_token: "sc_session_1754594702_7b395d48"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:12,104 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:12,509 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 7b395d48-1557-4a83-9a92-ea4b79ab7672
2025-08-07 22:25:12,510 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:25:12,510 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:25:12,619 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:25:12,620 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:25:12,822 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:25:13,025 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:25:13,226 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:25:13,226 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:13,336 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:13,445 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:13,553 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:13,662 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:13,772 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:13,880 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:13,990 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:14,192 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:25:14,192 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:25:14,192 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:25:14,706 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:25:14,707 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50158) disconnected (session: 7b395d48-1557-4a83-9a92-ea4b79ab7672)
2025-08-07 22:25:14,707 - INFO - [__main__] 📊 Session stats: 12.6s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 22:25:14,707 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 7b395d48-1557-4a83-9a92-ea4b79ab7672
2025-08-07 22:25:14,707 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:25:22,200 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50162 (session: cf24d5f6-6ced-4ae7-8810-d2b1fd5ed726)
2025-08-07 22:25:22,216 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:25:22,217 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:25:22,217 - INFO - [__main__] 🔍 Service discovery request from session cf24d5f6-6ced-4ae7-8810-d2b1fd5ed726
2025-08-07 22:25:22,217 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594722217

2025-08-07 22:25:22,217 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:25:31,990 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:31,990 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:31,990 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594731990
session_token: "sc_session_1754594722_cf24d5f6"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:31,990 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:32,100 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:32,100 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:32,100 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594732100
session_token: "sc_session_1754594722_cf24d5f6"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:32,101 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:32,214 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:32,214 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:32,214 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594732214
session_token: "sc_session_1754594722_cf24d5f6"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:32,214 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:32,495 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session cf24d5f6-6ced-4ae7-8810-d2b1fd5ed726
2025-08-07 22:25:32,496 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:25:32,496 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:25:32,606 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:25:32,606 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:25:32,807 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:25:33,012 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:25:33,215 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:25:33,216 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:33,324 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:33,433 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:33,543 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:33,652 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:33,762 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:33,871 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:33,980 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:34,183 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:25:34,183 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:25:34,183 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:25:34,684 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:25:34,685 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50162) disconnected (session: cf24d5f6-6ced-4ae7-8810-d2b1fd5ed726)
2025-08-07 22:25:34,685 - INFO - [__main__] 📊 Session stats: 12.5s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-07 22:25:34,685 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session cf24d5f6-6ced-4ae7-8810-d2b1fd5ed726
2025-08-07 22:25:34,685 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:25:42,198 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50166 (session: 6df3666e-feaf-4fe9-abe5-3183de08b101)
2025-08-07 22:25:42,221 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:25:42,221 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:25:42,221 - INFO - [__main__] 🔍 Service discovery request from session 6df3666e-feaf-4fe9-abe5-3183de08b101
2025-08-07 22:25:42,221 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594742221

2025-08-07 22:25:42,221 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:25:51,991 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:51,992 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:51,992 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594751992
session_token: "sc_session_1754594742_6df3666e"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:51,992 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:52,101 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:52,101 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:52,101 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594752101
session_token: "sc_session_1754594742_6df3666e"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:52,102 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:52,215 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:52,215 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:52,215 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594752215
session_token: "sc_session_1754594742_6df3666e"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:52,215 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:52,325 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:25:52,325 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:25:52,325 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594752325
session_token: "sc_session_1754594742_6df3666e"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:25:52,325 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:25:52,497 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 6df3666e-feaf-4fe9-abe5-3183de08b101
2025-08-07 22:25:52,498 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:25:52,498 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:25:52,606 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:25:52,606 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:25:52,809 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:25:53,012 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:25:53,214 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:25:53,214 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:53,324 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:53,432 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:25:53,543 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:53,652 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:53,760 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:53,868 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:25:53,979 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:25:54,184 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:25:54,185 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:25:54,185 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:25:54,699 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:25:54,700 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50166) disconnected (session: 6df3666e-feaf-4fe9-abe5-3183de08b101)
2025-08-07 22:25:54,700 - INFO - [__main__] 📊 Session stats: 12.5s duration, 5 messages, stage: heartbeat_active, heartbeats: 4
2025-08-07 22:25:54,700 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 6df3666e-feaf-4fe9-abe5-3183de08b101
2025-08-07 22:25:54,700 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:26:02,200 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50170 (session: 8502902b-75da-4485-baf6-501c1a3feba0)
2025-08-07 22:26:02,217 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:26:02,217 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:26:02,217 - INFO - [__main__] 🔍 Service discovery request from session 8502902b-75da-4485-baf6-501c1a3feba0
2025-08-07 22:26:02,217 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594762217

2025-08-07 22:26:02,218 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:26:32,322 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50170) disconnected (session: 8502902b-75da-4485-baf6-501c1a3feba0)
2025-08-07 22:26:32,322 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
2025-08-07 22:27:02,017 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:27:02,017 - INFO - [__main__] ================================================================================
2025-08-07 22:27:02,017 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:27:02,017 - INFO - [__main__] ================================================================================
2025-08-07 22:27:02,017 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:27:02,017 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:27:02,017 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:27:02,017 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:27:02,017 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:27:02,018 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:27:02,018 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:27:02,018 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:27:02,018 - INFO - [__main__] 
2025-08-07 22:27:02,018 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:27:02,018 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:27:02,018 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:27:02,018 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:27:02,018 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:27:02,018 - INFO - [__main__] ================================================================================
2025-08-07 22:27:02,018 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:27:02,019 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:27:07,917 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50193 (session: dbfec463-1cb3-4eb8-a362-d049754c168e)
2025-08-07 22:27:07,918 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50193) disconnected (session: dbfec463-1cb3-4eb8-a362-d049754c168e)
2025-08-07 22:27:07,918 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:27:56,606 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50225 (session: 61fad0e7-65b9-4c3c-9c51-01512798db9c)
2025-08-07 22:27:56,623 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:27:56,623 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:27:56,623 - INFO - [__main__] 🔍 Service discovery request from session 61fad0e7-65b9-4c3c-9c51-01512798db9c
2025-08-07 22:27:56,623 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594876623

2025-08-07 22:27:56,623 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:27:56,732 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:27:56,732 - INFO - [__main__] 🎮 Lobby destinations request from session 61fad0e7-65b9-4c3c-9c51-01512798db9c
2025-08-07 22:27:56,732 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754594876732

2025-08-07 22:27:56,732 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:27:56,865 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:27:56,865 - INFO - [__main__] 🌍 Region setup request from session 61fad0e7-65b9-4c3c-9c51-01512798db9c
2025-08-07 22:27:56,866 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:27:56,866 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:28:06,620 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:28:06,620 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:28:06,620 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594886620
session_token: "sc_session_1754594876_61fad0e7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:28:06,621 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:28:07,121 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 61fad0e7-65b9-4c3c-9c51-01512798db9c
2025-08-07 22:28:07,122 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:28:07,122 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:28:07,230 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:28:07,230 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:28:07,432 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:28:07,635 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:28:07,839 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:28:07,839 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:07,947 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:28:08,057 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:28:08,165 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:08,274 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:08,384 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:08,492 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:08,601 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:08,803 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:28:08,803 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:28:08,804 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:28:09,318 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:28:09,319 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50225) disconnected (session: 61fad0e7-65b9-4c3c-9c51-01512798db9c)
2025-08-07 22:28:09,319 - INFO - [__main__] 📊 Session stats: 12.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 22:28:09,319 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 61fad0e7-65b9-4c3c-9c51-01512798db9c
2025-08-07 22:28:09,319 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:28:26,711 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50232 (session: fcb8cad4-90e4-47d2-9152-bffd93ebbc68)
2025-08-07 22:28:26,733 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:28:26,733 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:28:26,733 - INFO - [__main__] 🔍 Service discovery request from session fcb8cad4-90e4-47d2-9152-bffd93ebbc68
2025-08-07 22:28:26,733 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754594906733

2025-08-07 22:28:26,733 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:28:36,620 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:28:36,620 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:28:36,620 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594916620
session_token: "sc_session_1754594906_fcb8cad4"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:28:36,620 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:28:36,727 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:28:36,728 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:28:36,728 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754594916728
session_token: "sc_session_1754594906_fcb8cad4"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:28:36,728 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:28:37,132 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session fcb8cad4-90e4-47d2-9152-bffd93ebbc68
2025-08-07 22:28:37,132 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:28:37,132 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:28:37,240 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:28:37,240 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:28:37,443 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:28:37,645 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:28:37,847 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:28:37,847 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:37,956 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:28:38,064 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:28:38,172 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:38,281 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:38,391 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:38,500 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:28:38,610 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:28:38,812 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:28:38,812 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:28:38,813 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:28:39,328 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:28:39,328 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50232) disconnected (session: fcb8cad4-90e4-47d2-9152-bffd93ebbc68)
2025-08-07 22:28:39,329 - INFO - [__main__] 📊 Session stats: 12.6s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 22:28:39,329 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session fcb8cad4-90e4-47d2-9152-bffd93ebbc68
2025-08-07 22:28:39,329 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:41:54,246 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50392 (session: b1c318bb-faa5-4dfa-8093-09b80d9e58ed)
2025-08-07 22:41:54,247 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50392) disconnected (session: b1c318bb-faa5-4dfa-8093-09b80d9e58ed)
2025-08-07 22:41:54,247 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:41:55,183 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50397 (session: 1df76baf-25e0-4acc-a8e8-e2a416a0ff74)
2025-08-07 22:41:55,183 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50397) disconnected (session: 1df76baf-25e0-4acc-a8e8-e2a416a0ff74)
2025-08-07 22:41:55,183 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:42:36,520 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:42:36,520 - INFO - [__main__] ================================================================================
2025-08-07 22:42:36,520 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:42:36,520 - INFO - [__main__] ================================================================================
2025-08-07 22:42:36,521 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:42:36,521 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:42:36,521 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:42:36,521 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:42:36,521 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:42:36,521 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:42:36,521 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:42:36,521 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:42:36,521 - INFO - [__main__] 
2025-08-07 22:42:36,521 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:42:36,521 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:42:36,521 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:42:36,522 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:42:36,522 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:42:36,522 - INFO - [__main__] ================================================================================
2025-08-07 22:42:36,522 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:42:36,522 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:42:42,413 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50422 (session: 50413684-3cfe-4f15-9b97-7c6220e264fb)
2025-08-07 22:42:42,413 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50422) disconnected (session: 50413684-3cfe-4f15-9b97-7c6220e264fb)
2025-08-07 22:42:42,413 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:43:13,303 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50453 (session: 57581338-9cbf-4435-af98-7ceb549b6009)
2025-08-07 22:43:13,326 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:43:13,326 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:43:13,326 - INFO - [__main__] 🔍 Service discovery request from session 57581338-9cbf-4435-af98-7ceb549b6009
2025-08-07 22:43:13,326 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754595793326

2025-08-07 22:43:13,326 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:43:13,434 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:43:13,434 - INFO - [__main__] 🎮 Lobby destinations request from session 57581338-9cbf-4435-af98-7ceb549b6009
2025-08-07 22:43:13,434 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754595793434

2025-08-07 22:43:13,434 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:43:13,580 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:43:13,580 - INFO - [__main__] 🌍 Region setup request from session 57581338-9cbf-4435-af98-7ceb549b6009
2025-08-07 22:43:13,580 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:43:13,581 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:43:23,320 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:43:23,320 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:43:23,321 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754595803321
session_token: "sc_session_1754595793_57581338"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:43:23,321 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:43:23,832 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 57581338-9cbf-4435-af98-7ceb549b6009
2025-08-07 22:43:23,833 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:43:23,833 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:43:23,940 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:43:23,941 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:43:24,142 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:43:24,343 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:43:24,560 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:43:24,560 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:24,667 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:43:24,777 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:43:24,886 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:24,995 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:25,106 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:25,214 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:25,322 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:25,524 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:43:25,525 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:43:25,525 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:43:26,039 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:43:26,039 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50453) disconnected (session: 57581338-9cbf-4435-af98-7ceb549b6009)
2025-08-07 22:43:26,039 - INFO - [__main__] 📊 Session stats: 12.7s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 22:43:26,040 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 57581338-9cbf-4435-af98-7ceb549b6009
2025-08-07 22:43:26,040 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:43:43,426 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50468 (session: 4680d96c-808a-4483-8545-b45967008331)
2025-08-07 22:43:43,443 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:43:43,443 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 22:43:43,443 - INFO - [__main__] 🔍 Service discovery request from session 4680d96c-808a-4483-8545-b45967008331
2025-08-07 22:43:43,443 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754595823443

2025-08-07 22:43:43,443 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:43:53,321 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:43:53,322 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:43:53,322 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754595833322
session_token: "sc_session_1754595823_4680d96c"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:43:53,322 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:43:53,440 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:43:53,441 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:43:53,441 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754595833441
session_token: "sc_session_1754595823_4680d96c"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:43:53,441 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:43:53,824 - INFO - [__main__] 🔐 Triggering ONE-TIME authentication flow for session 4680d96c-808a-4483-8545-b45967008331
2025-08-07 22:43:53,825 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 22:43:53,825 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 22:43:53,932 - INFO - [__main__] 📤 Sending enhanced login flow sequence...
2025-08-07 22:43:53,933 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 22:43:54,135 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 22:43:54,337 - INFO - [__main__] 📤 Sent AccountLoginCharacterStatusMessage for TestPilot at Stanton_ArcCorp_Area18 (wrapped)
2025-08-07 22:43:54,540 - INFO - [__main__] 📤 Sending REAL CLIENT RECONCILE SEQUENCE...
2025-08-07 22:43:54,540 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: ReconcileAccount started (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:54,650 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:43:54,760 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 411 Long-Term persistence items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_LTP)
2025-08-07 22:43:54,868 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:54,977 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Retrieved all items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:55,086 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Started processing 443 entitlements (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:55,196 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Finished processing 41 platform items (RECONCILE_ACCOUNT_STATUS_EXECUTING/RECONCILE_ACCOUNT_PHASE_PLATFORM)
2025-08-07 22:43:55,304 - INFO - [__main__] 📤 Sent ReconcileAccountUpdate: Account reconciliation complete (RECONCILE_ACCOUNT_STATUS_COMPLETE/RECONCILE_ACCOUNT_PHASE_UNSPECIFIED)
2025-08-07 22:43:55,509 - INFO - [__main__] ✅ REAL CLIENT RECONCILE SEQUENCE COMPLETED
2025-08-07 22:43:55,510 - INFO - [__main__] 📤 Sent LoginCompletedMessage for persistent_universe server server_00120
2025-08-07 22:43:55,510 - INFO - [__main__] 🎯 Client should now connect to gRPC server for LoginNotificationStream
2025-08-07 22:43:56,020 - INFO - [__main__] 🔚 Closing connection to signal authentication completion
2025-08-07 22:43:56,020 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50468) disconnected (session: 4680d96c-808a-4483-8545-b45967008331)
2025-08-07 22:43:56,020 - INFO - [__main__] 📊 Session stats: 12.6s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 22:43:56,021 - INFO - [__main__] ✅ ONE-TIME Authentication flow completed for session 4680d96c-808a-4483-8545-b45967008331
2025-08-07 22:43:56,021 - INFO - [__main__] 🎯 Client should now progress past kAccountLoginSuccess state
2025-08-07 22:53:05,419 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 22:53:05,419 - INFO - [__main__] ================================================================================
2025-08-07 22:53:05,419 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 22:53:05,419 - INFO - [__main__] ================================================================================
2025-08-07 22:53:05,419 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 22:53:05,420 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 22:53:05,420 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 22:53:05,420 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 22:53:05,420 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 22:53:05,420 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 22:53:05,420 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 22:53:05,420 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 22:53:05,420 - INFO - [__main__] 
2025-08-07 22:53:05,420 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 22:53:05,420 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 22:53:05,420 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 22:53:05,420 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 22:53:05,420 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 22:53:05,420 - INFO - [__main__] ================================================================================
2025-08-07 22:53:05,421 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 22:53:05,421 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 22:53:11,325 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50602 (session: 49cae217-5078-46ee-a276-cfea527f07aa)
2025-08-07 22:53:11,326 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50602) disconnected (session: 49cae217-5078-46ee-a276-cfea527f07aa)
2025-08-07 22:53:11,326 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 22:53:52,564 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50640 (session: 82ca96b7-49fb-4dd4-88a0-a423202e26a0)
2025-08-07 22:53:52,582 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 22:53:52,582 - INFO - [__main__] 📨 Received binary message (93 bytes)
2025-08-07 22:53:52,582 - INFO - [__main__] 🔍 Service discovery request from session 82ca96b7-49fb-4dd4-88a0-a423202e26a0
2025-08-07 22:53:52,582 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 5678
  ssl_enabled: true
  protocols: "https"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754596432582

2025-08-07 22:53:52,582 - INFO - [__main__] 📤 Sent response to client (178 bytes)
2025-08-07 22:53:52,705 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 22:53:52,705 - INFO - [__main__] 🎮 Lobby destinations request from session 82ca96b7-49fb-4dd4-88a0-a423202e26a0
2025-08-07 22:53:52,705 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754596432705

2025-08-07 22:53:52,705 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 22:53:52,898 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 22:53:52,898 - INFO - [__main__] 🌍 Region setup request from session 82ca96b7-49fb-4dd4-88a0-a423202e26a0
2025-08-07 22:53:52,899 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 22:53:52,899 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 22:54:02,578 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 22:54:02,578 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:02,578 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:02,578 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596442578
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:02,578 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:54:12,580 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:54:12,580 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:12,580 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:12,581 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596452580
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:12,581 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:54:22,577 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:54:22,577 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:22,577 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:22,577 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596462577
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:22,577 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:54:32,574 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:54:32,575 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:32,575 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:32,575 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596472575
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:32,575 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:54:42,579 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:54:42,580 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:42,580 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:42,580 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596482580
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:42,580 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:54:52,579 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 22:54:52,579 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 22:54:52,579 - INFO - [__main__] 🎮 Real Star Citizen client detected - gRPC server will handle authentication
2025-08-07 22:54:52,579 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754596492579
session_token: "sc_session_1754596432_82ca96b7"
keep_alive: true
heartbeat_interval: 30

2025-08-07 22:54:52,579 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 22:55:22,694 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50640) disconnected (session: 82ca96b7-49fb-4dd4-88a0-a423202e26a0)
2025-08-07 22:55:22,695 - INFO - [__main__] 📊 Session stats: 90.1s duration, 9 messages, stage: heartbeat_active, heartbeats: 6
2025-08-07 23:04:36,658 - INFO - [__main__] 🚀 Starting Star Citizen Diffusion Server...
2025-08-07 23:04:36,658 - INFO - [__main__] ================================================================================
2025-08-07 23:04:36,659 - INFO - [__main__] 🎮 STAR CITIZEN DIFFUSION SERVER READY
2025-08-07 23:04:36,659 - INFO - [__main__] ================================================================================
2025-08-07 23:04:36,659 - INFO - [__main__] 🔥 CAPABILITIES:
2025-08-07 23:04:36,659 - INFO - [__main__]    * SSL/TLS handshake support
2025-08-07 23:04:36,659 - INFO - [__main__]    * Protobuf-based message handling (star_network.proto)
2025-08-07 23:04:36,659 - INFO - [__main__]    * Heartbeat monitoring with proper protobuf responses
2025-08-07 23:04:36,659 - INFO - [__main__]    * Service discovery protobuf responses
2025-08-07 23:04:36,659 - INFO - [__main__]    * Lobby destination protobuf responses
2025-08-07 23:04:36,659 - INFO - [__main__]    * Region setup protobuf responses
2025-08-07 23:04:36,659 - INFO - [__main__]    * Running on port 8001 (behind MITM proxy on 8000)
2025-08-07 23:04:36,659 - INFO - [__main__] 
2025-08-07 23:04:36,659 - INFO - [__main__] 🌐 NETWORK FLOW:
2025-08-07 23:04:36,659 - INFO - [__main__]    Star Citizen Client (8000) → MITM Proxy → Diffusion Server (8001) → Redirect to Services
2025-08-07 23:04:36,659 - INFO - [__main__]    * Service Discovery → Authentication Service (8443)
2025-08-07 23:04:36,659 - INFO - [__main__]    * Lobby Destinations → Game Servers (5678)
2025-08-07 23:04:36,659 - INFO - [__main__]    * Region Setup → Backend Services
2025-08-07 23:04:36,659 - INFO - [__main__] ================================================================================
2025-08-07 23:04:36,659 - INFO - [__main__] 🔓 SSL disabled - running behind MITM proxy
2025-08-07 23:04:36,660 - INFO - [__main__] 🔓 Diffusion Server listening on 127.0.0.1:8001 (No SSL - behind proxy)
2025-08-07 23:04:42,525 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50790 (session: b9645a03-af84-436e-8cc2-5a06556650d7)
2025-08-07 23:04:42,525 - INFO - [__main__] 🔌 Test Client ('127.0.0.1', 50790) disconnected (session: b9645a03-af84-436e-8cc2-5a06556650d7)
2025-08-07 23:04:42,525 - INFO - [__main__] 📊 Session stats: 0.0s duration, 0 messages, stage: initial, heartbeats: 0
2025-08-07 23:05:25,493 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50830 (session: a74bf25b-5069-4799-ad72-98f74f2257e4)
2025-08-07 23:05:25,515 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 23:05:25,515 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 23:05:25,515 - INFO - [__main__] 🔍 Service discovery request from session a74bf25b-5069-4799-ad72-98f74f2257e4
2025-08-07 23:05:25,515 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 9000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754597125515

2025-08-07 23:05:25,515 - INFO - [__main__] 📤 Sent response to client (175 bytes)
2025-08-07 23:05:25,617 - INFO - [__main__] 📨 Received binary message (31 bytes)
2025-08-07 23:05:25,626 - INFO - [__main__] 🎮 Lobby destinations request from session a74bf25b-5069-4799-ad72-98f74f2257e4
2025-08-07 23:05:25,627 - INFO - [__main__] 📤 Sending lobby destinations response with real server data: destinations {
  destination_id: "server_00120"
  name: "Persistent Universe - Stanton System"
  host: "127.0.0.1"
  port: 5678
  player_count: 1
  max_players: 50
  game_mode: "persistent_universe"
  available: true
}
region_id: "us-east-1"
response_time: 1754597125627

2025-08-07 23:05:25,627 - INFO - [__main__] 📤 Sent response to client (121 bytes)
2025-08-07 23:05:25,807 - INFO - [__main__] 📨 Received binary message (38 bytes)
2025-08-07 23:05:25,808 - INFO - [__main__] 🌍 Region setup request from session a74bf25b-5069-4799-ad72-98f74f2257e4
2025-08-07 23:05:25,809 - INFO - [__main__] 📤 Sending region setup response: success: true
region_id: "us-east-1"
message: "Region configured successfully"
region_services {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}

2025-08-07 23:05:25,809 - INFO - [__main__] 📤 Sent response to client (95 bytes)
2025-08-07 23:05:35,509 - INFO - [__main__] 📨 Received binary message (60 bytes)
2025-08-07 23:05:35,510 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:05:35,510 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597135510
session_token: "sc_session_1754597125_a74bf25b"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:05:35,510 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:05:36,011 - INFO - [__main__] 🔐 Triggering AUTHENTICATION REDIRECT for session a74bf25b-5069-4799-ad72-98f74f2257e4
2025-08-07 23:05:36,011 - INFO - [__main__] 🎯 Sending client to authentication server (port 443) for login
2025-08-07 23:05:36,012 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 23:05:36,012 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 23:05:36,113 - INFO - [__main__] 📤 Sending minimal redirect sequence...
2025-08-07 23:05:36,114 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 23:05:36,316 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 23:05:36,517 - INFO - [__main__] 📤 Sent LoginCompletedMessage with redirect to dedicated login server (port 9000)
2025-08-07 23:05:36,517 - INFO - [__main__] 🎯 Client should now connect to dedicated login server for authentication
2025-08-07 23:05:37,018 - INFO - [__main__] 🔚 Closing Diffusion Server connection - client should now connect to authentication server
2025-08-07 23:05:37,019 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50830) disconnected (session: a74bf25b-5069-4799-ad72-98f74f2257e4)
2025-08-07 23:05:37,019 - INFO - [__main__] 📊 Session stats: 11.5s duration, 4 messages, stage: heartbeat_active, heartbeats: 1
2025-08-07 23:05:37,019 - INFO - [__main__] ✅ Authentication REDIRECT completed for session a74bf25b-5069-4799-ad72-98f74f2257e4
2025-08-07 23:05:37,019 - INFO - [__main__] 🎯 Client should now connect to authentication server (port 443)
2025-08-07 23:05:55,613 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50841 (session: 730f04c5-60b8-4c18-b505-4bb1cc7f597c)
2025-08-07 23:05:55,630 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 23:05:55,630 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 23:05:55,630 - INFO - [__main__] 🔍 Service discovery request from session 730f04c5-60b8-4c18-b505-4bb1cc7f597c
2025-08-07 23:05:55,630 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 9000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754597155630

2025-08-07 23:05:55,630 - INFO - [__main__] 📤 Sent response to client (175 bytes)
2025-08-07 23:06:05,510 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 23:06:05,510 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:06:05,510 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597165510
session_token: "sc_session_1754597155_730f04c5"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:06:05,510 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:06:05,629 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 23:06:05,629 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:06:05,629 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597165629
session_token: "sc_session_1754597155_730f04c5"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:06:05,629 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:06:06,013 - INFO - [__main__] 🔐 Triggering AUTHENTICATION REDIRECT for session 730f04c5-60b8-4c18-b505-4bb1cc7f597c
2025-08-07 23:06:06,013 - INFO - [__main__] 🎯 Sending client to authentication server (port 443) for login
2025-08-07 23:06:06,014 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 23:06:06,014 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 23:06:06,115 - INFO - [__main__] 📤 Sending minimal redirect sequence...
2025-08-07 23:06:06,115 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 23:06:06,316 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 23:06:06,517 - INFO - [__main__] 📤 Sent LoginCompletedMessage with redirect to dedicated login server (port 9000)
2025-08-07 23:06:06,517 - INFO - [__main__] 🎯 Client should now connect to dedicated login server for authentication
2025-08-07 23:06:07,018 - INFO - [__main__] 🔚 Closing Diffusion Server connection - client should now connect to authentication server
2025-08-07 23:06:07,018 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50841) disconnected (session: 730f04c5-60b8-4c18-b505-4bb1cc7f597c)
2025-08-07 23:06:07,019 - INFO - [__main__] 📊 Session stats: 11.4s duration, 3 messages, stage: heartbeat_active, heartbeats: 2
2025-08-07 23:06:07,019 - INFO - [__main__] ✅ Authentication REDIRECT completed for session 730f04c5-60b8-4c18-b505-4bb1cc7f597c
2025-08-07 23:06:07,019 - INFO - [__main__] 🎯 Client should now connect to authentication server (port 443)
2025-08-07 23:06:15,722 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50848 (session: 76c6b6ab-8acc-4703-bf81-23e923d95881)
2025-08-07 23:06:15,739 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 23:06:15,740 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 23:06:15,740 - INFO - [__main__] 🔍 Service discovery request from session 76c6b6ab-8acc-4703-bf81-23e923d95881
2025-08-07 23:06:15,740 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 9000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754597175740

2025-08-07 23:06:15,740 - INFO - [__main__] 📤 Sent response to client (175 bytes)
2025-08-07 23:06:25,510 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 23:06:25,510 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:06:25,510 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597185510
session_token: "sc_session_1754597175_76c6b6ab"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:06:25,511 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:06:25,624 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 23:06:25,624 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:06:25,624 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597185624
session_token: "sc_session_1754597175_76c6b6ab"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:06:25,625 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:06:25,733 - INFO - [__main__] 📨 Received binary message (51 bytes)
2025-08-07 23:06:25,734 - INFO - [__main__] 📊 Parsed heartbeat request: heartbeat: "heartbeat"

2025-08-07 23:06:25,734 - INFO - [__main__] 📤 Sending protobuf heartbeat response: heartbeat_ack: "heartbeat_ack"
server_time: 1754597185734
session_token: "sc_session_1754597175_76c6b6ab"
keep_alive: true
heartbeat_interval: 30

2025-08-07 23:06:25,734 - INFO - [__main__] 📤 Sent response to client (66 bytes)
2025-08-07 23:06:26,012 - INFO - [__main__] 🔐 Triggering AUTHENTICATION REDIRECT for session 76c6b6ab-8acc-4703-bf81-23e923d95881
2025-08-07 23:06:26,012 - INFO - [__main__] 🎯 Sending client to authentication server (port 443) for login
2025-08-07 23:06:26,013 - INFO - [__main__] 📊 Using real client data: TestPilot at Stanton_ArcCorp_Area18
2025-08-07 23:06:26,013 - INFO - [__main__] 📤 Sent already_authenticated ClientIntentMessage
2025-08-07 23:06:26,114 - INFO - [__main__] 📤 Sending minimal redirect sequence...
2025-08-07 23:06:26,115 - INFO - [__main__] 📤 Sent ProcessingQueueJoinedMessage (wrapped)
2025-08-07 23:06:26,317 - INFO - [__main__] 📤 Sent ProcessingQueueExitedMessage - CLIENT SHOULD EXIT LOGIN QUEUE NOW
2025-08-07 23:06:26,519 - INFO - [__main__] 📤 Sent LoginCompletedMessage with redirect to dedicated login server (port 9000)
2025-08-07 23:06:26,519 - INFO - [__main__] 🎯 Client should now connect to dedicated login server for authentication
2025-08-07 23:06:27,019 - INFO - [__main__] 🔚 Closing Diffusion Server connection - client should now connect to authentication server
2025-08-07 23:06:27,020 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50848) disconnected (session: 76c6b6ab-8acc-4703-bf81-23e923d95881)
2025-08-07 23:06:27,020 - INFO - [__main__] 📊 Session stats: 11.3s duration, 4 messages, stage: heartbeat_active, heartbeats: 3
2025-08-07 23:06:27,020 - INFO - [__main__] ✅ Authentication REDIRECT completed for session 76c6b6ab-8acc-4703-bf81-23e923d95881
2025-08-07 23:06:27,021 - INFO - [__main__] 🎯 Client should now connect to authentication server (port 443)
2025-08-07 23:06:35,723 - INFO - [__main__] 🔌 New client connection from 127.0.0.1:50854 (session: cd094e03-d4ab-476b-9be1-0713a783e7c3)
2025-08-07 23:06:35,739 - INFO - [__main__] 🎮 Detected real Star Citizen client connection!
2025-08-07 23:06:35,739 - INFO - [__main__] 📨 Received binary message (92 bytes)
2025-08-07 23:06:35,740 - INFO - [__main__] 🔍 Service discovery request from session cd094e03-d4ab-476b-9be1-0713a783e7c3
2025-08-07 23:06:35,740 - INFO - [__main__] 📤 Sending service discovery response with auth redirect: service_online: true
endpoints {
  service_name: "authentication_service"
  host: "127.0.0.1"
  port: 9000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "diffusion_service"
  host: "127.0.0.1"
  port: 8000
  protocols: "http"
  protocols: "websocket"
}
endpoints {
  service_name: "game_server"
  host: "127.0.0.1"
  port: 5678
  protocols: "grpc"
  protocols: "http2"
}
server_version: "1.0.0"
server_time: 1754597195740

2025-08-07 23:06:35,740 - INFO - [__main__] 📤 Sent response to client (175 bytes)
2025-08-07 23:07:05,843 - INFO - [__main__] 🔌 Star Citizen Client ('127.0.0.1', 50854) disconnected (session: cd094e03-d4ab-476b-9be1-0713a783e7c3)
2025-08-07 23:07:05,843 - INFO - [__main__] 📊 Session stats: 30.1s duration, 1 messages, stage: service_discovery, heartbeats: 0
